<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Swift4 æ–°ç‰¹æ€§å‚è€ƒè‡ªï¼šRay Wenderlich - iOS11 by Tutorials
One-sided rangesæˆ‘ä»¬ç°åœ¨å¯ä»¥è¿™æ ·è¡¨ç¤ºä¸€ä¸ªèŒƒå›´ï¼š
123let array = [&quot;é€šä¿¡ç”µå­çº¿è·¯&quot;, &quot;ç”µç£åœºä¸ç”µç£æ³¢&quot;, &quot;æ•°å­—ä¿¡å·å¤„ç†&quot;, &quot;é€šä¿¡åŸç†&quot;, &quot;è®¡ç®—æœºç½‘ç»œ&quot;]print">
    

    <!--Author-->
    
        <meta name="author" content="ç‹è·¯è¿œ">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Swift4æ–°ç‰¹æ€§"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Berr"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Swift4æ–°ç‰¹æ€§ - Berr</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Berr">
            <img src="https://ooo.0o0.ooo/2017/04/22/58fac3a2c7b05.png" class="dib h3" alt="Berr">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="é¦–é¡µ">
                    é¦–é¡µ
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="å½’æ¡£">
                    å½’æ¡£
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about" 
                    title="å…³äº">
                    å…³äº
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact" 
                    title="è”ç³»æˆ‘">
                    è”ç³»æˆ‘
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">Swift4æ–°ç‰¹æ€§</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2017-10-08</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/Swift/">#Swift</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <h1 id="Swift4-æ–°ç‰¹æ€§"><a href="#Swift4-æ–°ç‰¹æ€§" class="headerlink" title="Swift4 æ–°ç‰¹æ€§"></a>Swift4 æ–°ç‰¹æ€§</h1><p>å‚è€ƒè‡ªï¼šRay Wenderlich - iOS11 by Tutorials</p>
<h3 id="One-sided-ranges"><a href="#One-sided-ranges" class="headerlink" title="One-sided ranges"></a>One-sided ranges</h3><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥è¿™æ ·è¡¨ç¤ºä¸€ä¸ªèŒƒå›´ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> array = [<span class="string">"é€šä¿¡ç”µå­çº¿è·¯"</span>, <span class="string">"ç”µç£åœºä¸ç”µç£æ³¢"</span>, <span class="string">"æ•°å­—ä¿¡å·å¤„ç†"</span>, <span class="string">"é€šä¿¡åŸç†"</span>, <span class="string">"è®¡ç®—æœºç½‘ç»œ"</span>]</div><div class="line"><span class="built_in">print</span>(array[...<span class="number">3</span>])</div><div class="line">\\æ‰“å°å‡º: [<span class="string">"é€šä¿¡ç”µå­çº¿è·¯"</span>, <span class="string">"ç”µç£åœºä¸ç”µç£æ³¢"</span>, <span class="string">"æ•°å­—ä¿¡å·å¤„ç†"</span>, <span class="string">"é€šä¿¡åŸç†"</span>]</div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">array[..&lt;<span class="number">3</span>]</div><div class="line">array[<span class="number">2</span>...]</div></pre></td></tr></table></figure>
<p>å•è¾¹èŒƒå›´ä¹Ÿå¯ä»¥ç”¨æ¥äº§ç”Ÿä¸€ä¸ªæ— é™åºåˆ—ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> uppercase = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>]</div><div class="line"><span class="keyword">let</span> asciiCodes = <span class="built_in">zip</span>(<span class="number">65</span>..., uppercase)</div><div class="line"><span class="built_in">print</span>(<span class="type">Array</span>(asciiCodes))</div><div class="line">\\æ‰“å°å‡º: [(<span class="number">65</span>, <span class="string">"A"</span>), (<span class="number">66</span>, <span class="string">"B"</span>), (<span class="number">67</span>, <span class="string">"C"</span>), (<span class="number">68</span>, <span class="string">"D"</span>)]</div></pre></td></tr></table></figure>
<p>è¿™é‡Œ <code>zip</code> æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸ç”¨çš„ä¸€ä¸ªå‡½æ•°ï¼Œå°±åƒ map, flatmap é‚£æ ·ã€‚å®ƒè¡¨ç¤ºæŠŠä¸¤ä¸ªåºåˆ—â€œé½¿åˆâ€æˆä¸€ä¸ªåºåˆ—ã€‚åˆ«å¿˜äº† zip æœ‰â€œæ‹‰é“¾â€çš„æ„æ€ã€‚</p>
<p>åœ¨æ¨¡å¼åŒ¹é…ä¸­ä¹Ÿå¯ä»¥åº”ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">slet value = <span class="number">2</span></div><div class="line"><span class="keyword">switch</span> value &#123;</div><div class="line"><span class="keyword">case</span> ...<span class="number">2</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="number">2</span>)</div><div class="line"><span class="keyword">case</span> <span class="number">3</span>...:</div><div class="line">    <span class="built_in">print</span>(<span class="number">3</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="keyword">break</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è€Œä¸”å¹¶ä¸ä»…é™äºæ•´å‹ï¼Double å‹ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚</p>
<h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><p>String ç°åœ¨å›å½’äº†é›†åˆç±»å‹ï¼ˆå°±åƒ Swift1 ä¸­çš„é‚£æ ·ï¼‰ã€‚è¿™æ„å‘³ç€é›†åˆå¯ä»¥åšçš„äº‹æƒ…ï¼ŒString éƒ½å¯ä»¥åšã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">"How are you Indian Mi fans?"</span></div><div class="line"><span class="keyword">for</span> char <span class="keyword">in</span> str &#123;</div><div class="line">    <span class="built_in">print</span>(char)</div><div class="line">&#125;</div><div class="line">str.<span class="built_in">count</span></div><div class="line">str.isEmpty</div><div class="line"><span class="type">String</span>(str.reversed())</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ³¨æ„ï¼Œ<code>str.reversed()</code> è¿”å›çš„æ˜¯ä¸€ä¸ª <code>ReversedCollection&lt;String&gt;</code> ï¼Œæ‰€ä»¥å¿…é¡»å¼ºåˆ¶è½¬æ¢æˆ Stringã€‚</p>
<p>String è™½æ˜¯é›†åˆç±»å‹ï¼Œä½†æ˜¯ Int å’Œ Swift3 ä¸­ä¸€æ ·ä¸èƒ½ä½œä¸ºå…¶ä¸‹æ ‡ã€‚ä¸‹æ ‡å¿…é¡»æ˜¯ä¸€ä¸ª <code>String.Index</code> ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> index = str.index(str.startIndex, offsetBy: <span class="number">4</span>)</div><div class="line">str[index...] <span class="comment">//are you Indian Mi fans?</span></div></pre></td></tr></table></figure>
<p>Swift4 è¿˜å¸¦æ¥äº†ä¸€ä¸ªæ–°çš„ç±»å‹ï¼š<strong>Substring</strong></p>
<p>ä¸ºä»€ä¹ˆä¸ç»§ç»­ä½¿ç”¨ String ç±»å‹ï¼Œè€Œè¦æ„é€ ä¸€ä¸ªæ–°çš„ Substring ç±»å‹å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œä¸ºäº†ä¿è¯é«˜æ•ˆç‡ï¼ŒSwift å¤§é‡ä½¿ç”¨äº† copy-on-write æŠ€æœ¯ã€‚åœ¨ä½ æå–å‡ºä¸€ä¸ªå­ä¸²çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šçœŸçš„å¤åˆ¶å‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å‡ºæ¥ï¼Œè€Œæ˜¯å¤šäº†ä¸€ä¸ªæŒ‡å‘åŸæœ‰å­—ç¬¦ä¸²å…¶ä¸­ä¸€éƒ¨åˆ†çš„æŒ‡é’ˆã€‚å°±åƒè¿™æ ·ï¼š</p>
<p><img src="/img/Swift4æ–°ç‰¹æ€§/substring.png" alt="substring"></p>
<p>è¿™å›ä½¿å¾—è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨è®¡æ•°å¢åŠ ã€‚å½“ä½ ä¸åœ¨ä½¿ç”¨åŸæœ‰çš„å­—ç¬¦ä¸²è€Œè½¬è€Œåªç”¨å­ä¸²æ—¶ï¼ŒåŸæœ‰çš„å­—ç¬¦ä¸²å°±æ— æ³•è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚è€Œå¦‚æœå¼•å…¥äº†æ–°çš„ç±»å‹ Substringï¼Œè€Œå¤§é‡çš„ api è¦æ±‚ä¼ å…¥çš„ç±»å‹æ˜¯ Stringï¼Œä½ å°±ä¸å¾—ä¸å¼ºåˆ¶å°† Substring è½¬åŒ–ä¸º Stringï¼ˆSwift æ˜¯å¼ºç±»å‹è¯­è¨€çš„ç¼˜æ•…ï¼‰ã€‚è¿™ä¸ªè¢«å¼ºåˆ¶è½¬åŒ–å‡ºæ¥çš„ String å°±ä¸ä¹‹å‰çš„å­—ç¬¦ä¸²æ— å…³äº†ï¼ˆè¢« copy å‡ºæ¥ï¼‰ï¼Œä»è€Œé¿å…äº†å†…å­˜æ³„éœ²ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±å·²ç»å‡ºç°äº† Substringï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> sub = str[index...]</div><div class="line">type(of: sub) <span class="comment">//Substring.Type</span></div></pre></td></tr></table></figure>
<p>ç”±äº String å’Œ Substring éƒ½éµå®ˆ StringProtocolï¼Œæ‰€ä»¥å¤§å¤šæ•°ç”¨æ³•éƒ½æ˜¯ä¸€è‡´çš„ã€‚é‡ç‚¹éœ€è¦è®°ä½çš„å°±æ˜¯å†…å­˜ä¸­çš„å…³ç³»ã€‚</p>
<p>Range<string.index> å’Œ NSRange ä¹‹é—´çš„è½¬åŒ–ä¹Ÿå˜å¾—æ›´æ–¹ä¾¿äº†ï¼š</string.index></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">"ğŸ™ˆğŸ™‰ğŸ™ŠğŸµğŸ’"</span></div><div class="line">str.<span class="built_in">count</span> <span class="comment">//5</span></div><div class="line">str.utf16.<span class="built_in">count</span> <span class="comment">//10</span></div><div class="line"><span class="keyword">let</span> nsRange = <span class="type">NSRange</span>(str.startIndex..., <span class="keyword">in</span>: str) <span class="comment">//&#123;0, 10&#125;</span></div></pre></td></tr></table></figure>
<p>ï¼ˆNSRange å’Œ UTF-16 æ˜¯å¯¹åº”çš„ï¼‰</p>
<p>Swift4 è¿˜å¸¦æ¥äº†å¤šè¡Œå­—ç¬¦ä¸²ï¼Œå°±åƒ Python ä¸­çš„é‚£æ ·ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let str = """</div><div class="line">å¤§é¹ä¸€æ—¥åŒé£èµ·ï¼Œ</div><div class="line">æŠŸæ‘‡ç›´ä¸Šä¹ä¸‡é‡Œã€‚</div><div class="line">"""</div></pre></td></tr></table></figure>
<h3 id="Dictionary-enhancements"><a href="#Dictionary-enhancements" class="headerlink" title="Dictionary enhancements"></a>Dictionary enhancements</h3><p>æœ‰äº†æ–°çš„åˆå§‹åŒ–å‡½æ•°ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨é”®å€¼åºåˆ—æ¥æ„é€ å­—å…¸äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dic = <span class="type">Dictionary</span>(uniqueKeysWithValues: <span class="built_in">zip</span>(<span class="number">1</span>..., [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>]))</div><div class="line"><span class="comment">//dic: [2: "2", 3: "3", 1: "1"]</span></div></pre></td></tr></table></figure>
<p>æˆ–è€…ç”¨å…ƒç»„çš„åºåˆ—ä¹Ÿå¯ä»¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dic = <span class="type">Dictionary</span>(uniqueKeysWithValues: [(<span class="number">1</span>,<span class="string">"1"</span>), (<span class="number">2</span>,<span class="string">"2"</span>)])</div></pre></td></tr></table></figure>
<p>å¹¶ä¸”å¢åŠ äº†ä¸€ä¸ª merge å‡½æ•°ï¼Œç”¨æ¥åˆå¹¶ä¸¤ä¸ªå­—å…¸ã€‚åœ¨é—­åŒ…ä¸­å®šä¹‰é‡åˆ°å†²çªæ—¶çš„å¤„ç†æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> defaultStyling: [<span class="type">String</span>: <span class="type">UIColor</span>] = [</div><div class="line">    <span class="string">"body"</span>: .black, <span class="string">"title"</span>: .blue, <span class="string">"byline"</span>: .green</div><div class="line">]</div><div class="line"><span class="keyword">var</span> userStyling: [<span class="type">String</span>: <span class="type">UIColor</span>] = [</div><div class="line">    <span class="string">"body"</span>: .purple, <span class="string">"title"</span>: .blue</div><div class="line">]</div><div class="line">userStyling.merge(defaultStyling) &#123; (user, <span class="number">_</span>) -&gt; <span class="type">UIColor</span> <span class="keyword">in</span></div><div class="line">    user</div><div class="line">&#125;</div><div class="line"><span class="comment">// ["body": .purple, "title": .blue, "byline": .green]</span></div></pre></td></tr></table></figure>
<p>æ–°çš„ mapValues å‡½æ•°å¯ä»¥ä¸æ”¹å˜å­—å…¸çš„ç»“æ„ï¼ˆmap ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯å­—å…¸ï¼‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dic = <span class="type">Dictionary</span>(uniqueKeysWithValues: <span class="built_in">zip</span>(<span class="number">1</span>..., [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>]))</div><div class="line">dic = dic.mapValues&#123;</div><div class="line">    <span class="type">String</span>(<span class="type">Int</span>($<span class="number">0</span>)! + <span class="number">1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å­—å…¸ä¹Ÿå¯ä»¥ä¾æ®æŸä¸€ä¸ªç‰¹å¾æ¥è¿›è¡Œåˆ†ç»„ï¼ˆGroupingï¼‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> names = [<span class="string">"Harry"</span>, <span class="string">"ron"</span>, <span class="string">"Hermione"</span>, <span class="string">"Hannah"</span>, <span class="string">"neville"</span>, <span class="string">"pansy"</span>, <span class="string">"Padma"</span>].<span class="built_in">map</span> &#123; $<span class="number">0</span>.capitalized &#125; <span class="comment">//å¤§å†™</span></div><div class="line"><span class="keyword">let</span> nameList = <span class="type">Dictionary</span>(grouping: names) &#123; $<span class="number">0</span>.<span class="keyword">prefix</span>(<span class="number">1</span>) &#125;</div><div class="line"><span class="comment">//["H": ["Harry", "Hermione", "Hannah"], "R": ["Ron"], "N": ["Neville"], "P": ["Pansy", "Padma"]]</span></div></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰ä¸‹æ ‡å¯ä»¥è¿”å›èŒƒå‹äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Grade</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> data: [<span class="type">String</span>: <span class="type">Any</span>]</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(data: [<span class="type">String</span>: <span class="type">Any</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">subscript</span>&lt;<span class="type">T</span>&gt;(key: <span class="type">String</span>) -&gt; <span class="type">T</span>? &#123;</div><div class="line">        <span class="keyword">return</span> data[key] <span class="keyword">as</span>? <span class="type">T</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> gradebook = <span class="type">Grade</span>(data: [<span class="string">"name"</span>: <span class="string">"Neil Armstrong"</span>,</div><div class="line">                             <span class="string">"exam"</span>: <span class="string">"LEM Landing"</span>,</div><div class="line">                             <span class="string">"grade"</span>: <span class="number">97</span>])</div><div class="line"><span class="keyword">let</span> who: <span class="type">String</span>? = gradebook[<span class="string">"name"</span>]</div><div class="line"><span class="keyword">let</span> grade: <span class="type">Int</span>?  = gradebook[<span class="string">"grade"</span>]</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ä¸å¿…å†™ as è¯­å¥æŠŠ Any ç±»å‹è½¬åŒ–äº†ã€‚ä½†æ˜¯æŒ‡æ˜ç±»å‹ä»æ˜¯å¿…ä¸å¯å°‘çš„ï¼ˆå³<code>:Stringï¼Ÿ</code>ä¸å¯ç¼ºå°‘ï¼‰ã€‚</p>
<h3 id="è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å°å˜åŒ–"><a href="#è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å°å˜åŒ–" class="headerlink" title="è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å°å˜åŒ–"></a>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å°å˜åŒ–</h3><ul>
<li>extension ä¸­å¯ä»¥è®¿é—®åˆ° private æˆå‘˜å˜é‡äº†ã€‚</li>
<li>å‡ºäºå†…å­˜å®‰å…¨æ€§çš„è€ƒè™‘ï¼Œä¸€ä¸ªå˜é‡ä¸èƒ½è¢«å½“ä½œä¸¤ä¸ª <code>inout</code> å‚æ•°ä¼ å…¥åŒä¸€ä¸ªå‡½æ•°ï¼Œè¿™è¢«ç§°ä¸ºâ€œæ’ä»–æ€§â€ï¼ˆexclusivityï¼‰ã€‚æ‰€ä»¥ Swift3 ä¸­çš„ swap å‡½æ•°åœ¨ Swift4 ä¸­å°±éæ³•äº†ï¼š</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">swap</span>(&amp;numbers[<span class="number">1</span>], &amp;numbers[<span class="number">3</span>]) <span class="comment">// illegal in Swift4</span></div><div class="line"><span class="comment">//numbers ä¸èƒ½è¢«å½“ä½œä¸¤ä¸ª inout å‚æ•°ä¼ å…¥ swap å‡½æ•°</span></div></pre></td></tr></table></figure>
<p>â€‹    ç°åœ¨å¯ä»¥ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">numbers.swapAt(<span class="number">1</span>, <span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>â€‹    æ›´è¯¦ç»†çš„ä»‹ç»å‚çœ‹<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0173-swap-indices.md" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<ul>
<li>Swift4 ä¸­å¯¹ NSNumber çš„æ¡¥æ¥åšäº†å®‰å…¨æ€§æ£€æµ‹ï¼š</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> n = <span class="type">NSNumber</span>(value: <span class="number">603</span>)</div><div class="line"><span class="keyword">let</span> v = n <span class="keyword">as</span>? <span class="type">Int8</span></div></pre></td></tr></table></figure>
<p>â€‹    åœ¨ Swift3 ä¸­ï¼Œä¼šå‡ºç°ä¸€ä¸ªä¸æ­£ç¡®çš„å€¼ã€‚è€Œç°åœ¨ä¼šæ˜¯ nil äº†ã€‚ä¹Ÿå¯ä»¥ç”¨ is è¯­å¥æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥è½¬æ¢ã€‚</p>
<ul>
<li>å¯ä»¥å…·ä½“æŒ‡æ˜ä¸€ä¸ªå¯¹è±¡æ—¢æ˜¯æŸä¸ªç±»å‹ï¼Œåˆéµå®ˆæŸä¸ªåè®®äº†ï¼š</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MySpecialDelegateProtocol</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySpecialView</span>: <span class="title">UIView</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> delegate: (<span class="type">UIView</span> &amp; <span class="type">MySpecialDelegateProtocol</span>)?</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è¿˜æœ‰ä¸€äº›å‚è€ƒèµ„æ–™ï¼š"><a href="#è¿˜æœ‰ä¸€äº›å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="è¿˜æœ‰ä¸€äº›å‚è€ƒèµ„æ–™ï¼š"></a>è¿˜æœ‰ä¸€äº›å‚è€ƒèµ„æ–™ï¼š</h3><p><a href="https://github.com/apple/swift-evolution" target="_blank" rel="external">https://github.com/apple/swift-evolution</a></p>
<p><a href="https://developer.apple.com/videos/play/wwdc2017/402/" target="_blank" rel="external">https://developer.apple.com/videos/play/wwdc2017/402/</a></p>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/Swift/">#Swift</a>
                        </div>
                    

                    <!-- Comments -->
                    <span id="busuanzi_container_page_pv">
  <br/>æœ¬æ–‡æ€»é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡<br/>
</span>

<!--PCå’ŒWAPè‡ªé€‚åº”ç‰ˆ-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cytltkHPr'; 
var conf = 'prod_9d0366f4dd97c25a5dfc01c79988673c'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>






                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://ooo.0o0.ooo/2017/04/22/58fa2d6164f2d.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="ç‹è·¯è¿œ">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            ç‹è·¯è¿œ<br>åä¸­ç§‘æŠ€å¤§å­¦ å†°å²©ä½œåŠ<br>wangluyuan@bingyan.net<br>å‹æƒ…é“¾æ¥ï¼š<br><a href="http://jiaojie910.cc/"target="_blank">jiaojie910.cc</a>
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2017/12/31/SQLiteä½¿ç”¨/">SQLite.Swift ç®€å•ä½¿ç”¨</a>
        </p>
    
        <p>
            <a href="/2017/12/23/Swifté›†æˆå‹ç›Ÿæ•°æ®ç»Ÿè®¡/">Swifté›†æˆå‹ç›Ÿæ•°æ®ç»Ÿè®¡</a>
        </p>
    
        <p>
            <a href="/2017/11/18/iOS-ä¸ºTableViewå·¦æ»‘åˆ é™¤æ·»åŠ å›¾ç‰‡/">iOS ä¸º TableView å·¦æ»‘åˆ é™¤æ·»åŠ å›¾ç‰‡</a>
        </p>
    
        <p>
            <a href="/2017/11/13/iOSé™åˆ¶UIScrollViewå…è®¸æ»‘åŠ¨è§’åº¦/">iOSé™åˆ¶UIScrollViewå…è®¸æ»‘åŠ¨è§’åº¦</a>
        </p>
    
        <p>
            <a href="/2017/10/08/Swift4æ–°ç‰¹æ€§/">Swift4æ–°ç‰¹æ€§</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://git.bingyan.net/u/BeBeBerr" target="_blank">
                            <i class="fa fa-gitlab"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/BeBeBerr" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://weibo.com/BeBeBerr" target="_blank">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:wangluyuan@bingyan.net" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                wangluyuan@bingyan.net
            </div>
            
        </div>
    </div>


<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>