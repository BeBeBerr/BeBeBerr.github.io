<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Promise 是什么之前和前端组的同学聊天，发现他们有一个很有意思的东西叫 Promise。既然要是从前端组那里听说的 Promise，那么我们就先谈一些关于前端的东西。
单线程的 JavaScriptJavaScript 是单线程语言，也就是同一时间只能做一件事情。准确来说，是负责解释并执行 J">
    

    <!--Author-->
    
        <meta name="author" content="王路远">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Promise是什么"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Berr"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Promise是什么 - Berr</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Berr">
            <img src="https://ooo.0o0.ooo/2017/04/22/58fac3a2c7b05.png" class="dib h3" alt="Berr">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="首页">
                    首页
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="归档">
                    归档
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about" 
                    title="关于">
                    关于
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact" 
                    title="联系我">
                    联系我
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">Promise是什么</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-05-20</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/Promise/">#Promise</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <h1 id="Promise-是什么"><a href="#Promise-是什么" class="headerlink" title="Promise 是什么"></a>Promise 是什么</h1><p>之前和前端组的同学聊天，发现他们有一个很有意思的东西叫 Promise。既然要是从前端组那里听说的 Promise，那么我们就先谈一些关于前端的东西。</p>
<h3 id="单线程的-JavaScript"><a href="#单线程的-JavaScript" class="headerlink" title="单线程的 JavaScript"></a>单线程的 JavaScript</h3><p>JavaScript 是单线程语言，也就是同一时间只能做一件事情。准确来说，是负责解释并执行 JS 代码的线程只有一个。为什么要把 JavaScript 设定为单线程呢？这是因为它的工作环境主要是在浏览器中与用户互动，并操作 DOM。如果它是多线程的，那么就可能会并发地操作 DOM，从而带来非常复杂的同步问题。在新标准中，JavaScript 也被允许开启子线程，但子线程完全受主线程控制，且禁止操作 DOM。因此，JavaScript 仍然是单线程语言。</p>
<p>既然 JS 是单线程的，那么当我们进行耗时操作，比如前端非常常见的网络请求时，不就会发生界面卡死的情况吗？但我们又可以看到，浏览网页时是非常顺滑流畅的，并没有发生这种情况。因为虽然 JS 是单线程的，但浏览器作为一个 App 是支持多线程的。JS 通过一些方法，完全可以做到异步操作。异步和单线程并不是冲突的。</p>
<h3 id="JavaScript-异步原理"><a href="#JavaScript-异步原理" class="headerlink" title="JavaScript 异步原理"></a>JavaScript 异步原理</h3><p>首先来区分一下同步和异步。同步是指排队执行的任务，即前一个任务执行完成了，后一个任务才能开始执行，也就是我们熟悉的 sync。所有的同步任务都会在主线程执行，并形成一个执行栈。而异步任务有了运行结果后，就会把对应的事件放到任务队列中，比如鼠标点击事件、键盘事件、网络请求事件等等。当执行栈空了之后，系统就会读取任务队列，把相应的任务放入执行栈中执行。这个过程会不断的重复。</p>
<p>这里说的执行异步任务，指的是回调函数。异步任务在创建时必须指定回调函数，这个函数会被挂起，在主线程空闲后被拿来执行。这个重复的过程被称为 Event Loop。</p>
<p>清楚了回调方法后，再来谈具体是怎么实现异步的。前面提到，浏览器是多线程的，在浏览器中，会有这些线程：</p>
<ul>
<li>UI 线程。我们非常熟悉的线程，负责渲染 UI 界面。</li>
<li>JS 引擎线程。JS 代码在这个线程上执行。但是 JS 引擎线程并不仅是一个线程，会有子线程来配合它。JS 会影响页面渲染，因此它和 UI 线程是互斥的，这也是为什么 JS 执行时会阻塞 UI 线程。</li>
<li>HTTP 请求线程。</li>
<li>Event Loop 轮询线程。</li>
<li>……</li>
</ul>
<p>向网络请求这类的操作，实际上是通过浏览器的 API 委托给浏览器执行的。执行完毕，回调函数再给 JS 引擎执行。</p>
<h3 id="回调地狱-Callback-Hell"><a href="#回调地狱-Callback-Hell" class="headerlink" title="回调地狱 Callback Hell"></a>回调地狱 Callback Hell</h3><p>回调函数大家都很熟悉。每次异步任务，都要指定一个回调函数。那当我们想完成一步操作后，再进行下一步操作，就要在上一步的回调函数中写。如果下一步依赖上一步完成的情况多了，就会出现回调地狱：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &#123;</div><div class="line">        &#123;</div><div class="line">            &#123;</div><div class="line">                &#123;</div><div class="line">                    <span class="comment">//很容易编写出三角形的代码</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>举个例子：先登录，登录之后我们可以拿到用户的信息。根据用户信息去请求用户的头像，拿到头像后再去设置图片……我们在平时编写 iOS 应用时很容易就写成这样：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">login &#123; info, error <span class="keyword">in</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> info = info &#123;</div><div class="line">        fetch(avatar: info.userAvatarURL) &#123; image, error <span class="keyword">in</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> image = image &#123;</div><div class="line">                <span class="keyword">self</span>.imageView = image</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>饱受回调地狱折磨的显然不仅是前端，还有我们 iOS 啊！</p>
<h3 id="初识-Promise"><a href="#初识-Promise" class="headerlink" title="初识 Promise"></a>初识 Promise</h3><p>Promise 最早由开源社区提出并实现，最终被加入到了 JS ES6 标准中。Promise 代表了异步操作最终完成的或失败的对象。你可以把回调函数绑定在这个由函数返回的对象上，而不是把回调函数当作参数传进函数。</p>
<p>当作参数传进函数的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">successCallback</span>(<span class="params">result</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"It succeeded with "</span> + result);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">failureCallback</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"It failed with "</span> + error);</div><div class="line">&#125;</div><div class="line"></div><div class="line">doSomething(successCallback, failureCallback);</div></pre></td></tr></table></figure>
<p>绑定 Promise 对象的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">doSomething().then(successCallback, failureCallback);</div></pre></td></tr></table></figure>
<h3 id="Promise-了什么？"><a href="#Promise-了什么？" class="headerlink" title="Promise 了什么？"></a>Promise 了什么？</h3><p>Promise 到底保证了什么呢？</p>
<ul>
<li>当前运行完成前，回调函数永远不会被调用。</li>
<li>.then 添加的回调函数，都会被调用。</li>
<li>多次调用 .then 可以添加多个回调函数，它们会按照插入顺序独立运行。</li>
</ul>
<p>Promise 对象有三种状态，Pending、Resolved、Rejected。只有异步操作的结果可以决定当前是哪一种状态，其他任何操作都无法改变状态，且状态一旦改变就不会再变。这也是 Promise 名字的来源。</p>
<h3 id="Promise-使用"><a href="#Promise-使用" class="headerlink" title="Promise 使用"></a>Promise 使用</h3><p>我们可以直接 new 一个 Promise 对象，也可以把 Promise 对象作为返回值。Promise 里的代码会立即执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1</span></div><div class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123; <span class="comment">//使用了箭头函数</span></div><div class="line">    <span class="keyword">if</span>(success) &#123;</div><div class="line">        resolve(value)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        reject(error)</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">//2</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span>(success) &#123;</div><div class="line">            resolve(value)</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            reject(error)</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Promise 接受一个函数作为参数，这个函数又有两个参数 resolve 和 reject。resolve 和 reject 又分别是两个函数。这两个函数有 JavaScript 引擎提供，不需要自己实现。resolve 的作用是把状态从 pending 变为 resolved；reject 的作用是把状态从 pending 变为 rejected，同时把错误作为参数传递出去。</p>
<p>生成 Promise 实例后，可以用 then 方法制定状态变为 Resolved 和 Rejected 时的回调函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="comment">//success</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="comment">//failure</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>then 方法的第二个参数是可选的，不一定要提供。这两个函数接受 Promise 对象传出的值作为参数。</p>
<p>整体来看就是这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">        setTimeout(resolve, ms, <span class="string">'done'</span>); <span class="comment">//'done'作为参数传递给resolve函数</span></div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line">timeout(<span class="number">100</span>).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</div><div class="line">	<span class="built_in">console</span>.log(value);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>then 的返回值也是一个 Promise 对象，因此可以链式调用。而 Promise 的错误具有冒泡性质，会一直向后传递直到捕获为止，因此可以在最后用 catch 统一捕获错误。</p>
<h3 id="看一段代码"><a href="#看一段代码" class="headerlink" title="看一段代码"></a>看一段代码</h3><p>到现在，我们终于能看懂前端组的同学写的部分代码了，一起欣赏一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRequest</span>(<span class="params">......</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> options = &#123;......&#125;;</div><div class="line">    ......</div><div class="line">    return <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">    	request(options, (error, res, body) =&gt; &#123;</div><div class="line">      		<span class="keyword">if</span> (error) &#123;</div><div class="line">        		reject(error);</div><div class="line">      		&#125; <span class="keyword">else</span> &#123;</div><div class="line">        		resolve(&#123; error, res, body &#125;);</div><div class="line">      		&#125;</div><div class="line">		&#125;);</div><div class="line">	&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>首先，这是一个用于发送 HTTP 请求的函数，它传入了一些参数用来构建请求的参数 options。函数的结尾，返回了一个 Promise 对象。构造这个 Promise 对象时，传入了一个函数。这个函数体里，调用 request 函数实际发送请求，request 函数除了接受刚刚构建的 options 以外，还有一个回调函数作为参数。请求成功，resolve；失败，reject。</p>
<p>当然，在实际调用这个函数的时候，他是使用了 await 语法糖结合 try / catch 捕获错误。不过这里就不再讨论 await / async 这些东西了。</p>
<h3 id="回到-iOS"><a href="#回到-iOS" class="headerlink" title="回到 iOS"></a>回到 iOS</h3><p>讲了这么多 JavaScript 的东西，是时候回到 iOS 了。既然前端有 Promise 这么好的东西，我们当然也可以使用。</p>
<p>感谢开源社区，我们有了 <a href="https://github.com/mxcl/PromiseKit" target="_blank" rel="external">Promise Kit</a> 。</p>
<p>再来看我们已开始举的例子：登录 - 获取头像，用 Promise Kit 可以这样写：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> PromiseKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Info</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> url = <span class="string">""</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyError</span>: <span class="title">Error</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> imageView = <span class="type">UIImageView</span>()</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">     </div><div class="line">        firstly &#123;</div><div class="line">            login()</div><div class="line">        &#125;.then &#123; info <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.fetch(imageUrl: info.url)</div><div class="line">        &#125;.done &#123; image <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.imageView.image = image</div><div class="line">            <span class="built_in">print</span>(<span class="string">"got image"</span>)</div><div class="line">        &#125;.<span class="keyword">catch</span> &#123; error <span class="keyword">in</span></div><div class="line">            <span class="built_in">print</span>(error)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">login</span><span class="params">()</span></span> -&gt; <span class="type">Promise</span>&lt;<span class="type">Info</span>&gt; &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"start login"</span>)</div><div class="line">        <span class="keyword">return</span> <span class="type">Promise</span> &#123; seal <span class="keyword">in</span></div><div class="line">            <span class="type">DispatchQueue</span>.global().async &#123;</div><div class="line">                <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">2</span>)</div><div class="line">                seal.fulfill(<span class="type">Info</span>(url: <span class="string">"https://www.baidu.com"</span>))</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetch</span><span class="params">(imageUrl: String)</span></span> -&gt; <span class="type">Promise</span>&lt;<span class="type">UIImage</span>&gt; &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"start fetch image"</span>)</div><div class="line">        <span class="keyword">return</span> <span class="type">Promise</span> &#123; seal <span class="keyword">in</span></div><div class="line">            <span class="type">DispatchQueue</span>.global().async &#123;</div><div class="line">                <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">2</span>)</div><div class="line">                seal.reject(<span class="type">MyError</span>(description: <span class="string">"获取图片出错了"</span>))</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里我就简单的 sleep 了两秒钟来模拟网络请求。我们可以看到，代码成功地变成了扁平的，避免了层层嵌套。在 Promise Kit 中，执行成功的函数被叫做了 fulfilll。firstly 只是语法糖，直接调用 <code>login().then</code> 是完全一样的，但是使用 firstly 将使得语义更加清晰。</p>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/Promise/">#Promise</a>
                        </div>
                    

                    <!-- Comments -->
                    <span id="busuanzi_container_page_pv">
  <br/>本文总阅读量：<span id="busuanzi_value_page_pv"></span>次<br/>
</span>

<!--PC和WAP自适应版-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cytltkHPr'; 
var conf = 'prod_9d0366f4dd97c25a5dfc01c79988673c'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>






                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://ooo.0o0.ooo/2017/04/22/58fa2d6164f2d.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="王路远">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            王路远<br>华中科技大学 冰岩作坊<br>wangluyuan@bingyan.net<br>e@wangluyuan.cc</a>
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2018/08/08/iOS静默推送/">iOS静默推送</a>
        </p>
    
        <p>
            <a href="/2018/07/26/JavaScript基础分享/">JavaScript基础分享</a>
        </p>
    
        <p>
            <a href="/2018/07/20/iOS图片裁剪旋转格式转换/">iOS图片裁剪、旋转、格式转换</a>
        </p>
    
        <p>
            <a href="/2018/07/13/解决Unacceptable-Content-Type/">解决Unacceptable Content-Type问题</a>
        </p>
    
        <p>
            <a href="/2018/07/13/AFNetworking设置HTTP-Header-Body/">AFNetworking设置HTTP的Header和Body</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://git.bingyan.net/u/BeBeBerr" target="_blank">
                            <i class="fa fa-gitlab"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/BeBeBerr" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://weibo.com/BeBeBerr" target="_blank">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:wangluyuan@bingyan.net" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                www.wangluyuan.cc
            </div>
            
        </div>
    </div>


<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>