<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Flutter for iOS Developers 翻译官方文档原文链接：https://flutter.io/flutter-for-ios/
此翻译文档已被 Flutter 中文网 收录。

本文档适用那些希望将现有 iOS 经验应用于 Flutter 的开发者。如果你拥有 iOS 开发基础，">
    

    <!--Author-->
    
        <meta name="author" content="王路远">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Flutter for iOS devs 翻译"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Berr"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Flutter for iOS devs 翻译 - Berr</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Berr">
            <img src="https://ooo.0o0.ooo/2017/04/22/58fac3a2c7b05.png" class="dib h3" alt="Berr">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="首页">
                    首页
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="归档">
                    归档
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about" 
                    title="关于">
                    关于
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact" 
                    title="联系我">
                    联系我
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">Flutter for iOS devs 翻译</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-07-11</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/Flutter/">#Flutter</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <h1 id="Flutter-for-iOS-Developers-翻译"><a href="#Flutter-for-iOS-Developers-翻译" class="headerlink" title="Flutter for iOS Developers 翻译"></a>Flutter for iOS Developers 翻译</h1><p>官方文档原文链接：<a href="https://flutter.io/flutter-for-ios/" target="_blank" rel="external">https://flutter.io/flutter-for-ios/</a></p>
<p>此翻译文档已被 <a href="https://flutterchina.club/flutter-for-ios/" target="_blank" rel="external">Flutter 中文网</a> 收录。</p>
<hr>
<p>本文档适用那些希望将现有 iOS 经验应用于 Flutter 的开发者。如果你拥有 iOS 开发基础，那么你可以使用这篇文档开始学习 Flutter 的开发。</p>
<p>开发 Flutter 时，你的 iOS 经验和技能将会大有裨益，因为 Flutter 依赖于移动操作系统的众多功能和配置。Flutter 是用于为移动设备构建用户界面的全新方式，但它也有一个插件系统用于和 iOS（及 Android）进行非 UI 任务的通信。如果你是 iOS 开发专家，则你不必将 Flutter 彻底重新学习一遍。</p>
<p>你可以将此文档作为 cookbook，通过跳转并查找与你的需求最相关的问题。</p>
<h2 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h2><h3 id="UIView-相当于-Flutter-中的什么？"><a href="#UIView-相当于-Flutter-中的什么？" class="headerlink" title="UIView 相当于 Flutter 中的什么？"></a>UIView 相当于 Flutter 中的什么？</h3><p>在 iOS 中，构建 UI 的过程中将大量使用 view 对象。这些对象都是 <code>UIView</code> 的实例。它们可以用作容器来承载其他的 UIView，最终构成你的界面布局。</p>
<p>在 Flutter 中，你可以粗略地认为 <code>Widget</code> 相当于 <code>UIView</code> 。Widget 和 iOS 中的控件并不完全等价，但当你试图去理解 Flutter 是如何工作的时候，你可以认为它们是“声明和构建 UI 的方法”。</p>
<p>然而，Widget 和 UIView 还是有些区别的。首先，widgets 拥有不同的生存时间：它们一直存在且保持不变，直到当它们需要被改变。当 widgets 和它们的状态被改变时，Flutter 会构建一颗新的 widgets 树。作为对比，iOS 中的 views 在改变时并不会被重新创建。但是与其说 views 是可变的实例，不如说它们被绘制了一次，并且直到使用 <code>setNeedsDisplay()</code> 之后才会被重新绘制。</p>
<p>此外，不像 UIView，由于不可变性，Flutter 的 widgets 非常轻量。这是因为它们本身并不是什么控件，也不会被直接绘制出什么，而只是 UI 的描述。</p>
<p>Flutter 包含了 <a href="https://material.io/develop/flutter/" target="_blank" rel="external">Material 组件</a>库。这些 widgets 遵循了 <a href="https://material.io/design/" target="_blank" rel="external">Material 设计规范</a>。MD 是一个灵活的设计系统，并且为包括 iOS 在内的<a href="https://material.io/design/platform-guidance/cross-platform-adaptation.html#cross-platform-guidelines" target="_blank" rel="external">所有系统进行了优化</a>。</p>
<p>但是用 Flutter 实现任何的设计语言都非常的灵活和富有表现力。在 iOS 平台，你可以使用 <a href="https://flutter.io/widgets/cupertino/" target="_blank" rel="external">Cupertino widgets</a> 来构建遵循了 <a href="https://developer.apple.com/design/resources/" target="_blank" rel="external">Apple’s iOS design language</a> 的界面。</p>
<h3 id="我怎么来更新-Widgets？"><a href="#我怎么来更新-Widgets？" class="headerlink" title="我怎么来更新 Widgets？"></a>我怎么来更新 Widgets？</h3><p>在 iOS 上更新 views，只需要直接改变它们就可以了。在 Flutter 中，widgets 是不可变的，而且不能被直接更新。你需要去操纵 widget 的 state。</p>
<p>这也正是有状态的和无状态的 widget 这一概念的来源。一个 <code>StatelessWidget</code> 正如它听起来一样，是一个没有附加状态的 widget。</p>
<p><code>StatelessWidget</code> 在你构建初始化后不再进行改变的界面时非常有用。</p>
<p>举个例子，你可能会用一个 <code>UIImageView</code> 来展示你的 logo <code>image</code> 。如果这个 logo 在运行时不会改变，那么你就可以在 Flutter 中使用 <code>StatelessWidget</code> 。</p>
<p>如果你希望在发起 HTTP 请求时，依托接收到的数据动态的改变 UI，请使用 <code>StatefulWidget</code>。当 HTTP 请求结束后，通知 Flutter 框架 widget 的 <code>State</code> 更新了，好让系统来更新 UI。</p>
<p>有状态和无状态的 widget 之间一个非常重要的区别是，<code>StatefulWidget</code> 拥有一个 <code>State</code> 对象来存储它的状态数据，并在 widget 树重建时携带着它，因此状态不会丢失。</p>
<p>如果你有疑惑，请记住以下规则：如果一个 widget 在它的 <code>build</code> 方法之外改变（例如，在运行时由于用户的操作而改变），它就是有状态的。如果一个 widget 在一次 build 之后永远不变，那它就是无状态的。但是，即便一个 widget 是有状态的，包含它的父亲 widget 也可以是无状态的，只要父 widget 本身不响应这些变化。</p>
<p>下面的例子展示了如何使用一个 <code>StatelessWidget</code> 。一个常见的 <code>StatelessWidget</code> 是 <code>Text</code> widget。如果你查看 Text 的实现，你会发现它是 StatelessWidget 的子类。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Text(</div><div class="line">  <span class="string">'I like Flutter!'</span>,</div><div class="line">  style: TextStyle(fontWeight: FontWeight.bold),</div><div class="line">);</div></pre></td></tr></table></figure>
<p>阅读上面的代码，你可能会注意到 <code>Text</code> widget 并不显示地携带任何状态。它通过传入给它的构造器的数据来渲染，除此之外再无其他。</p>
<p>但是，如果你希望 <code>I like Flutter</code>在点击 <code>FloatingActionButton</code> 时动态的改变呢？</p>
<p>为了实现这个，用 <code>StatefulWidget</code> 包裹 <code>Text</code> widget，并在用户点击按钮时更新它。</p>
<p>举个例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="comment">// Default placeholder text</span></div><div class="line">  <span class="built_in">String</span> textToShow = <span class="string">"I Like Flutter"</span>;</div><div class="line">  <span class="keyword">void</span> _updateText() &#123;</div><div class="line">    setState(() &#123;</div><div class="line">      <span class="comment">// update the text</span></div><div class="line">      textToShow = <span class="string">"Flutter is Awesome!"</span>;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: Center(child: Text(textToShow)),</div><div class="line">      floatingActionButton: FloatingActionButton(</div><div class="line">        onPressed: _updateText,</div><div class="line">        tooltip: <span class="string">'Update Text'</span>,</div><div class="line">        child: Icon(Icons.update),</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么对-widget-布局？我的-Storyboard-在哪？"><a href="#我怎么对-widget-布局？我的-Storyboard-在哪？" class="headerlink" title="我怎么对 widget 布局？我的 Storyboard 在哪？"></a>我怎么对 widget 布局？我的 Storyboard 在哪？</h3><p>在 iOS 中，你可能会用 Storyboard 文件来组织 views，并对它们设置约束，或者，你可能在 view controller 中使用代码来设置约束。在 Flutter 中，你通过编写一个 widget 树来声明你的布局。</p>
<p>下面这个例子展示了如何展示一个带有 padding 的简单 widget：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line">Widget build(BuildContext context) &#123;</div><div class="line">  <span class="keyword">return</span> Scaffold(</div><div class="line">    appBar: AppBar(</div><div class="line">      title: Text(<span class="string">"Sample App"</span>),</div><div class="line">    ),</div><div class="line">    body: Center(</div><div class="line">      child: CupertinoButton(</div><div class="line">        onPressed: () &#123;</div><div class="line">          setState(() &#123; _pressedCount += <span class="number">1</span>; &#125;);</div><div class="line">        &#125;,</div><div class="line">        child: Text(<span class="string">'Hello'</span>),</div><div class="line">        padding: EdgeInsets.only(left: <span class="number">10.0</span>, right: <span class="number">10.0</span>),</div><div class="line">      ),</div><div class="line">    ),</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>你可以给任何的 widget 添加 padding，这很像 iOS 中约束的功能。</p>
<p>你可以在 <a href="https://flutter.io/widgets/layout/" target="_blank" rel="external">widget catalog</a> 中查看 Flutter 提供的布局。</p>
<h3 id="我怎么在我的约束中添加或移除组件？"><a href="#我怎么在我的约束中添加或移除组件？" class="headerlink" title="我怎么在我的约束中添加或移除组件？"></a>我怎么在我的约束中添加或移除组件？</h3><p>在 iOS 中，你在父 view 中调用 <code>addSubview()</code> 或在子 view 中调用 <code>removeFromSuperview()</code> 来动态地添加或移除子 views。在 Flutter 中，由于 widget 不可变，所以没有和 <code>addSubview()</code> 直接等价的东西。作为替代，你可以向 parent 传入一个返回 widget 的函数，并用一个布尔值来控制子 widget 的创建。</p>
<p>下面这个例子展示了在点击 <code>FloatingActionButton</code> 时如何动态地切换两个 widgets：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="comment">// Default value for toggle</span></div><div class="line">  <span class="built_in">bool</span> toggle = <span class="keyword">true</span>;</div><div class="line">  <span class="keyword">void</span> _toggle() &#123;</div><div class="line">    setState(() &#123;</div><div class="line">      toggle = !toggle;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _getToggleChild() &#123;</div><div class="line">    <span class="keyword">if</span> (toggle) &#123;</div><div class="line">      <span class="keyword">return</span> Text(<span class="string">'Toggle One'</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> CupertinoButton(</div><div class="line">        onPressed: () &#123;&#125;,</div><div class="line">        child: Text(<span class="string">'Toggle Two'</span>),</div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: Center(</div><div class="line">        child: _getToggleChild(),</div><div class="line">      ),</div><div class="line">      floatingActionButton: FloatingActionButton(</div><div class="line">        onPressed: _toggle,</div><div class="line">        tooltip: <span class="string">'Update Text'</span>,</div><div class="line">        child: Icon(Icons.update),</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么对-widget-做动画？"><a href="#我怎么对-widget-做动画？" class="headerlink" title="我怎么对 widget 做动画？"></a>我怎么对 widget 做动画？</h3><p>在 iOS 中，你通过调用 <code>animate(withDuration:animations:)</code> 方法来给一个 view 创建动画。在 Flutter 中，使用动画库来包裹 widgets，而不是创建一个动画 widget。</p>
<p>在 Flutter 中，使用 <code>AnimationController</code> 。这是一个可以暂停、寻找、停止、反转动画的 <code>Animation&lt;double&gt;</code> 类型。它需要一个 <code>Ticker</code> 当 vsync 发生时来发送信号，并且在每帧运行时创建一个介于 0 和 1 之间的线性插话（interpolation）。你可以创建一个或多个的 <code>Animation</code> 并附加给一个 controller。</p>
<p>例如，你可能会用 <code>CurvedAnimation</code> 来实现一个 interpolated 曲线。在这个场景中，controller 是动画过程的“主人”，而 <code>CurvedAnimation</code> 计算曲线，并替代 controller 默认的线性模式。</p>
<p>当构建 widget 树时，你会把 <code>Animation</code> 指定给一个 widget 的动画属性，比如 <code>FadeTransition</code> 的 opacity，并告诉控制器开始动画。</p>
<p>下面这个例子展示了在点击 <code>FloatingActionButton</code> 之后，如何使用 <code>FadeTransition</code> 来让 widget 淡出到 logo 图标：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Fade Demo'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: MyFadeTest(title: <span class="string">'Fade Demo'</span>),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyFadeTest</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  MyFadeTest(&#123;Key key, <span class="keyword">this</span>.title&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="keyword">final</span> <span class="built_in">String</span> title;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _MyFadeTest createState() =&gt; _MyFadeTest();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyFadeTest</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyFadeTest</span>&gt; <span class="title">with</span> <span class="title">TickerProviderStateMixin</span> </span>&#123;</div><div class="line">  AnimationController controller;</div><div class="line">  CurvedAnimation curve;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> initState() &#123;</div><div class="line">    controller = AnimationController(duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">2000</span>), vsync: <span class="keyword">this</span>);</div><div class="line">    curve = CurvedAnimation(parent: controller, curve: Curves.easeIn);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(widget.title),</div><div class="line">      ),</div><div class="line">      body: Center(</div><div class="line">        child: Container(</div><div class="line">          child: FadeTransition(</div><div class="line">            opacity: curve,</div><div class="line">            child: FlutterLogo(</div><div class="line">              size: <span class="number">100.0</span>,</div><div class="line">            )</div><div class="line">          )</div><div class="line">        )</div><div class="line">      ),</div><div class="line">      floatingActionButton: FloatingActionButton(</div><div class="line">        tooltip: <span class="string">'Fade'</span>,</div><div class="line">        child: Icon(Icons.brush),</div><div class="line">        onPressed: () &#123;</div><div class="line">          controller.forward();</div><div class="line">        &#125;,</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  dispose() &#123;</div><div class="line">    controller.dispose();</div><div class="line">    <span class="keyword">super</span>.dispose();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更多信息，请参阅 <a href="https://flutter.io/widgets/animation/" target="_blank" rel="external">Animation &amp; Motion widgets</a>， <a href="https://flutter.io/tutorials/animation" target="_blank" rel="external">Animations tutorial</a> 以及 <a href="https://flutter.io/animations/" target="_blank" rel="external">Animations overview</a>。</p>
<h3 id="我该怎么绘图？"><a href="#我该怎么绘图？" class="headerlink" title="我该怎么绘图？"></a>我该怎么绘图？</h3><p>在 iOS 上，你通过 <code>CoreGraphics</code> 来在屏幕上绘制线条和形状。Flutter 有一套基于 <code>Canvas</code> 类的不同的 API，还有 <code>CustomPaint</code> 和 <code>CustomPainter</code> 这两个类来帮助你绘图。后者实现你在 canvas 上的绘图算法。</p>
<p>想要学习如何实现一个笔迹画笔，请参考 Collin 在 <a href="https://stackoverflow.com/questions/46241071/create-signature-area-for-mobile-app-in-dart-flutter" target="_blank" rel="external">StackOverflow</a> 上的回答。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignaturePainter</span> <span class="keyword">extends</span> <span class="title">CustomPainter</span> </span>&#123;</div><div class="line">  SignaturePainter(<span class="keyword">this</span>.points);</div><div class="line"></div><div class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;Offset&gt; points;</div><div class="line"></div><div class="line">  <span class="keyword">void</span> paint(Canvas canvas, Size size) &#123;</div><div class="line">    <span class="keyword">var</span> paint = Paint()</div><div class="line">      ..color = Colors.black</div><div class="line">      ..strokeCap = StrokeCap.round</div><div class="line">      ..strokeWidth = <span class="number">5.0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; points.length - <span class="number">1</span>; i++) &#123;</div><div class="line">      <span class="keyword">if</span> (points[i] != <span class="keyword">null</span> &amp;&amp; points[i + <span class="number">1</span>] != <span class="keyword">null</span>)</div><div class="line">        canvas.drawLine(points[i], points[i + <span class="number">1</span>], paint);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">bool</span> shouldRepaint(SignaturePainter other) =&gt; other.points != points;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Signature</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SignatureState createState() =&gt; SignatureState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignatureState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">Signature</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">  <span class="built_in">List</span>&lt;Offset&gt; _points = &lt;Offset&gt;[];</div><div class="line"></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> GestureDetector(</div><div class="line">      onPanUpdate: (DragUpdateDetails details) &#123;</div><div class="line">        setState(() &#123;</div><div class="line">          RenderBox referenceBox = context.findRenderObject();</div><div class="line">          Offset localPosition =</div><div class="line">          referenceBox.globalToLocal(details.globalPosition);</div><div class="line">          _points = <span class="built_in">List</span>.from(_points)..add(localPosition);</div><div class="line">        &#125;);</div><div class="line">      &#125;,</div><div class="line">      onPanEnd: (DragEndDetails details) =&gt; _points.add(<span class="keyword">null</span>),</div><div class="line">      child: CustomPaint(painter: SignaturePainter(_points), size: Size.infinite),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Widget-的透明度在哪里？"><a href="#Widget-的透明度在哪里？" class="headerlink" title="Widget 的透明度在哪里？"></a>Widget 的透明度在哪里？</h3><p>在 iOS 中，什么东西都会有一个 .opacity 或是 .alpha 的属性。在 Flutter 中，你需要给 widget 包裹一个 Opacity widget 来做到这一点。</p>
<h3 id="我怎么创建自定义的-widgets？"><a href="#我怎么创建自定义的-widgets？" class="headerlink" title="我怎么创建自定义的 widgets？"></a>我怎么创建自定义的 widgets？</h3><p>在 iOS 中，你编写 <code>UIView</code> 的子类，或使用已经存在的 view 来重载并实现方法，以达到特定的功能。在 Flutter 中，你会组合（<a href="https://flutter.io/technical-overview/#everythings-a-widget" target="_blank" rel="external">composing</a>）多个小的 widgets 来构建一个自定义的 widget（而不是扩展它）。</p>
<p>举个例子，如果你要构建一个 <code>CustomButton</code> ，并在构造器中传入它的 label？那就组合 <code>RaisedButton</code> 和 label，而不是扩展 <code>RaisedButton</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="keyword">final</span> <span class="built_in">String</span> label;</div><div class="line"></div><div class="line">  CustomButton(<span class="keyword">this</span>.label);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> RaisedButton(onPressed: () &#123;&#125;, child: Text(label));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后就像你使用其他任何 Flutter 的 widget 一样，使用你的 CustomButton：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line">Widget build(BuildContext context) &#123;</div><div class="line">  <span class="keyword">return</span> Center(</div><div class="line">    child: CustomButton(<span class="string">"Hello"</span>),</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h2><h3 id="我怎么在不同页面之间跳转？"><a href="#我怎么在不同页面之间跳转？" class="headerlink" title="我怎么在不同页面之间跳转？"></a>我怎么在不同页面之间跳转？</h3><p>在 iOS 中，你可以使用管理了 view controller 栈的 <code>UINavigationController</code> 来在不同的 view controller 之间跳转。</p>
<p>Flutter 也有类似的实现，使用了 <code>Navigator</code> 和 <code>Routes</code>。一个路由是 App 中“屏幕”或“页面”的抽象，而一个 Navigator 是管理多个路由的 <a href="https://flutter.io/flutter-for-ios/technical-overview/#everythings-a-widget" target="_blank" rel="external">widget</a> 。你可以粗略地把一个路由对应到一个 <code>UIViewController</code>。Navigator 的工作原理和 iOS 中 <code>UINavigationController</code> 非常相似，当你想跳转到新页面或者从新页面返回时，它可以 <code>push()</code> 和 <code>pop()</code> 路由。</p>
<p>在页面之间跳转，你有一对选择：</p>
<ul>
<li>具体指定一个由路由名构成的 <code>Map</code>。（MaterialApp）</li>
<li>直接跳转到一个路由。（WidgetApp）</li>
</ul>
<p>下面是构建一个 Map 的例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(MaterialApp(</div><div class="line">    home: MyAppHome(), <span class="comment">// becomes the route named '/'</span></div><div class="line">    routes: &lt;<span class="built_in">String</span>, WidgetBuilder&gt; &#123;</div><div class="line">      <span class="string">'/a'</span>: (BuildContext context) =&gt; MyPage(title: <span class="string">'page A'</span>),</div><div class="line">      <span class="string">'/b'</span>: (BuildContext context) =&gt; MyPage(title: <span class="string">'page B'</span>),</div><div class="line">      <span class="string">'/c'</span>: (BuildContext context) =&gt; MyPage(title: <span class="string">'page C'</span>),</div><div class="line">    &#125;,</div><div class="line">  ));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过把路由的名字 <code>push</code> 给一个 <code>Navigator</code> 来跳转：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Navigator.of(context).pushNamed(<span class="string">'/b'</span>);</div></pre></td></tr></table></figure>
<p><code>Navigator</code> 类不仅用来处理 Flutter 中的路由，还被用来获取你刚 push 到栈中的路由返回的结果。通过 <code>await</code> <code>push()</code> 返回的 <code>Future</code> 来达到这点。</p>
<p>举个例子，要跳转到“位置”路由来让用户选择一个地点，你可能要这么做：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Map</span> coordinates = <span class="keyword">await</span> Navigator.of(context).pushNamed(<span class="string">'/location'</span>);</div></pre></td></tr></table></figure>
<p>之后，在 location 路由中，一旦用户选择了地点，携带结果一起 <code>pop()</code> 出栈：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Navigator.of(context).pop(&#123;<span class="string">"lat"</span>:<span class="number">43.821757</span>,<span class="string">"long"</span>:<span class="number">-79.226392</span>&#125;);</div></pre></td></tr></table></figure>
<h3 id="我怎么跳转到其他-App？"><a href="#我怎么跳转到其他-App？" class="headerlink" title="我怎么跳转到其他 App？"></a>我怎么跳转到其他 App？</h3><p>在 iOS 中，要跳转到其他 App，你需要一个特定的 URL Scheme。对系统级别的 App 来说，这个 scheme 取决于 App。为了在 Flutter 中实现这个功能，你可以创建一个原生平台的整合层，或者使用现有的 <a href="https://flutter.io/flutter-for-ios/#plugins" target="_blank" rel="external">plugin</a>，例如 <a href="https://pub.dartlang.org/packages/url_launcher" target="_blank" rel="external">url_launcher</a>。</p>
<h2 id="线程和异步"><a href="#线程和异步" class="headerlink" title="线程和异步"></a>线程和异步</h2><h3 id="我怎么编写异步的代码？"><a href="#我怎么编写异步的代码？" class="headerlink" title="我怎么编写异步的代码？"></a>我怎么编写异步的代码？</h3><p>Dart 是单线程执行模型，但是它支持 <code>Isolate</code>（一种让 Dart 代码运行在其他线程的方式）、事件循环和异步编程。除非你自己创建一个 <code>Isolate</code> ，否则你的 Dart 代码永远运行在 UI 线程，并由 event loop 驱动。Flutter 的 event loop 和 iOS 中的 main loop 相似——<code>Looper</code> 是附加在主线程上的。</p>
<p>Dart 的单线程模型并不意味着你写的代码一定是阻塞操作，从而卡住 UI。相反，使用 Dart 语言提供的异步工具，例如 <code>async</code> / <code>await</code> ，来实现异步操作。</p>
<p>举个例子，你可以使用 <code>async</code> / <code>await</code> 来让 Dart 帮你做一些繁重的工作，编写网络请求代码而不会挂起 UI：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">loadData() <span class="keyword">async</span> &#123;</div><div class="line">  <span class="built_in">String</span> dataURL = <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>;</div><div class="line">  http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">  setState(() &#123;</div><div class="line">    widgets = json.decode(response.body);</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>一旦 <code>await</code> 到网络请求完成，通过调用 <code>setState()</code> 来更新 UI，这会触发 widget 子树的重建，并更新相关数据。</p>
<p>下面的例子展示了异步加载数据，并用 <code>ListView</code> 展示出来：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> http;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="built_in">List</span> widgets = [];</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> initState() &#123;</div><div class="line">    <span class="keyword">super</span>.initState();</div><div class="line"></div><div class="line">    loadData();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: ListView.builder(</div><div class="line">          itemCount: widgets.length,</div><div class="line">          itemBuilder: (BuildContext context, <span class="built_in">int</span> position) &#123;</div><div class="line">            <span class="keyword">return</span> getRow(position);</div><div class="line">          &#125;));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Widget getRow(<span class="built_in">int</span> i) &#123;</div><div class="line">    <span class="keyword">return</span> Padding(</div><div class="line">      padding: EdgeInsets.all(<span class="number">10.0</span>),</div><div class="line">      child: Text(<span class="string">"Row <span class="subst">$&#123;widgets[i][<span class="string">"title"</span>]&#125;</span>"</span>)</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  loadData() <span class="keyword">async</span> &#123;</div><div class="line">    <span class="built_in">String</span> dataURL = <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>;</div><div class="line">    http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">    setState(() &#123;</div><div class="line">      widgets = json.decode(response.body);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> 更多关于在后台工作的信息，以及 Flutter 和 iOS 的区别，请参考下一章节。</p>
<h3 id="你是怎么把工作放到后台线程的？"><a href="#你是怎么把工作放到后台线程的？" class="headerlink" title="你是怎么把工作放到后台线程的？"></a>你是怎么把工作放到后台线程的？</h3><p>由于 Flutter 是单线程并且跑着一个 event loop 的（就像 Node.js 那样），你不必为线程管理或是开启后台线程而操心。如果你正在做 I/O 操作，如访问磁盘或网络请求，安全地使用 <code>async</code> / <code>await</code> 就完事了。如果，在另外的情况下，你需要做让 CPU 保持繁忙的计算密集型任务，你需要使用 <code>Isolate</code> 来避免阻塞 event loop。</p>
<p>对于 I/O 操作，把方法声明为 <code>async</code> 方法，并且 <code>await</code> 方法里需要长期运行的任务：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">loadData() <span class="keyword">async</span> &#123;</div><div class="line">  <span class="built_in">String</span> dataURL = <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>;</div><div class="line">  http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">  setState(() &#123;</div><div class="line">    widgets = json.decode(response.body);</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这就是对诸如网络请求或数据库访问等 I/O 操作的典型做法。</p>
<p>然而，有时候你需要处理大量的数据，这会导致你的 UI 挂起。在 Flutter 中，使用 <code>Isolate</code> 来发挥多核心 CPU 的优势来处理那些长期运行或是计算密集型的任务。</p>
<p>Isolates 是分离的运行线程，并且不和主线程的内存堆共享内存。这意味着你不能访问主线程中的变量，或者使用 <code>setState()</code> 来更新 UI。正如它们的名字一样，Isolates 不能共享内存。</p>
<p>下面的例子展示了一个简单的 isolate，是如何把数据返回给主线程来更新 UI 的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">loadData() <span class="keyword">async</span> &#123;</div><div class="line">  ReceivePort receivePort = ReceivePort();</div><div class="line">  <span class="keyword">await</span> Isolate.spawn(dataLoader, receivePort.sendPort);</div><div class="line"></div><div class="line">  <span class="comment">// The 'echo' isolate sends its SendPort as the first message</span></div><div class="line">  SendPort sendPort = <span class="keyword">await</span> receivePort.first;</div><div class="line"></div><div class="line">  <span class="built_in">List</span> msg = <span class="keyword">await</span> sendReceive(sendPort, <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>);</div><div class="line"></div><div class="line">  setState(() &#123;</div><div class="line">    widgets = msg;</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// The entry point for the isolate</span></div><div class="line"><span class="keyword">static</span> dataLoader(SendPort sendPort) <span class="keyword">async</span> &#123;</div><div class="line">  <span class="comment">// Open the ReceivePort for incoming messages.</span></div><div class="line">  ReceivePort port = ReceivePort();</div><div class="line"></div><div class="line">  <span class="comment">// Notify any other isolates what port this isolate listens to.</span></div><div class="line">  sendPort.send(port.sendPort);</div><div class="line"></div><div class="line">  <span class="keyword">await</span> <span class="keyword">for</span> (<span class="keyword">var</span> msg <span class="keyword">in</span> port) &#123;</div><div class="line">    <span class="built_in">String</span> data = msg[<span class="number">0</span>];</div><div class="line">    SendPort replyTo = msg[<span class="number">1</span>];</div><div class="line"></div><div class="line">    <span class="built_in">String</span> dataURL = data;</div><div class="line">    http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">    <span class="comment">// Lots of JSON to parse</span></div><div class="line">    replyTo.send(json.decode(response.body));</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Future sendReceive(SendPort port, msg) &#123;</div><div class="line">  ReceivePort response = ReceivePort();</div><div class="line">  port.send([msg, response.sendPort]);</div><div class="line">  <span class="keyword">return</span> response.first;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里，<code>dataLoader()</code> 是一个运行于自己独立执行线程上的 <code>Isolate</code>。在 isolate 里，你可以执行 CPU 密集型任务（例如解析一个庞大的 json），或是计算密集型的数学操作，如加密或信号处理等。</p>
<p>你可以运行下面的完整例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> http;</div><div class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'dart:isolate'</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="built_in">List</span> widgets = [];</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> initState() &#123;</div><div class="line">    <span class="keyword">super</span>.initState();</div><div class="line">    loadData();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  showLoadingDialog() &#123;</div><div class="line">    <span class="keyword">if</span> (widgets.length == <span class="number">0</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getBody() &#123;</div><div class="line">    <span class="keyword">if</span> (showLoadingDialog()) &#123;</div><div class="line">      <span class="keyword">return</span> getProgressDialog();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> getListView();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getProgressDialog() &#123;</div><div class="line">    <span class="keyword">return</span> Center(child: CircularProgressIndicator());</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">        appBar: AppBar(</div><div class="line">          title: Text(<span class="string">"Sample App"</span>),</div><div class="line">        ),</div><div class="line">        body: getBody());</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ListView getListView() =&gt; ListView.builder(</div><div class="line">      itemCount: widgets.length,</div><div class="line">      itemBuilder: (BuildContext context, <span class="built_in">int</span> position) &#123;</div><div class="line">        <span class="keyword">return</span> getRow(position);</div><div class="line">      &#125;);</div><div class="line"></div><div class="line">  Widget getRow(<span class="built_in">int</span> i) &#123;</div><div class="line">    <span class="keyword">return</span> Padding(padding: EdgeInsets.all(<span class="number">10.0</span>), child: Text(<span class="string">"Row <span class="subst">$&#123;widgets[i][<span class="string">"title"</span>]&#125;</span>"</span>));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  loadData() <span class="keyword">async</span> &#123;</div><div class="line">    ReceivePort receivePort = ReceivePort();</div><div class="line">    <span class="keyword">await</span> Isolate.spawn(dataLoader, receivePort.sendPort);</div><div class="line"></div><div class="line">    <span class="comment">// The 'echo' isolate sends its SendPort as the first message</span></div><div class="line">    SendPort sendPort = <span class="keyword">await</span> receivePort.first;</div><div class="line"></div><div class="line">    <span class="built_in">List</span> msg = <span class="keyword">await</span> sendReceive(sendPort, <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>);</div><div class="line"></div><div class="line">    setState(() &#123;</div><div class="line">      widgets = msg;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line"><span class="comment">// the entry point for the isolate</span></div><div class="line">  <span class="keyword">static</span> dataLoader(SendPort sendPort) <span class="keyword">async</span> &#123;</div><div class="line">    <span class="comment">// Open the ReceivePort for incoming messages.</span></div><div class="line">    ReceivePort port = ReceivePort();</div><div class="line"></div><div class="line">    <span class="comment">// Notify any other isolates what port this isolate listens to.</span></div><div class="line">    sendPort.send(port.sendPort);</div><div class="line"></div><div class="line">    <span class="keyword">await</span> <span class="keyword">for</span> (<span class="keyword">var</span> msg <span class="keyword">in</span> port) &#123;</div><div class="line">      <span class="built_in">String</span> data = msg[<span class="number">0</span>];</div><div class="line">      SendPort replyTo = msg[<span class="number">1</span>];</div><div class="line"></div><div class="line">      <span class="built_in">String</span> dataURL = data;</div><div class="line">      http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">      <span class="comment">// Lots of JSON to parse</span></div><div class="line">      replyTo.send(json.decode(response.body));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Future sendReceive(SendPort port, msg) &#123;</div><div class="line">    ReceivePort response = ReceivePort();</div><div class="line">    port.send([msg, response.sendPort]);</div><div class="line">    <span class="keyword">return</span> response.first;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么发起网络请求？"><a href="#我怎么发起网络请求？" class="headerlink" title="我怎么发起网络请求？"></a>我怎么发起网络请求？</h3><p>在 Flutter 中，使用流行的 <a href="https://pub.dartlang.org/packages/http" target="_blank" rel="external">http package</a> 做网络请求非常简单。它把你可能需要自己做的网络请求操作抽象了出来，让发起请求变得简单。</p>
<p>要使用 <code>http</code> 包，在 <code>pubspec.yaml</code> 中把它添加为依赖：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies:</div><div class="line">  ...</div><div class="line">  http: ^0.11.3+16</div></pre></td></tr></table></figure>
<p>发起网络请求，在 <code>http.get()</code> 这个 <code>async</code> 方法中使用 <code>await</code> ：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> http;</div><div class="line">[...]</div><div class="line">  loadData() <span class="keyword">async</span> &#123;</div><div class="line">    <span class="built_in">String</span> dataURL = <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>;</div><div class="line">    http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">    setState(() &#123;</div><div class="line">      widgets = json.decode(response.body);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么展示一个长时间运行的任务的进度？"><a href="#我怎么展示一个长时间运行的任务的进度？" class="headerlink" title="我怎么展示一个长时间运行的任务的进度？"></a>我怎么展示一个长时间运行的任务的进度？</h3><p>在 iOS 中，在后台运行耗时任务时你会使用 <code>UIProgressView</code>。 </p>
<p>在 Flutter 中，使用一个 <code>ProgressIndicator</code> widget。通过一个布尔 flag 来控制是否展示进度。在任务开始时，告诉 Flutter 更新状态，并在结束后隐去。</p>
<p>在下面的例子中，build 函数被拆分成三个函数。如果 <code>showLoadingDialog()</code> 是 <code>true</code> （当 <code>widgets.length == 0</code> 时），则渲染 <code>ProgressIndicator</code>。否则，当数据从网络请求中返回时，渲染 <code>ListView</code> 。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> http;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="built_in">List</span> widgets = [];</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> initState() &#123;</div><div class="line">    <span class="keyword">super</span>.initState();</div><div class="line">    loadData();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  showLoadingDialog() &#123;</div><div class="line">    <span class="keyword">return</span> widgets.length == <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getBody() &#123;</div><div class="line">    <span class="keyword">if</span> (showLoadingDialog()) &#123;</div><div class="line">      <span class="keyword">return</span> getProgressDialog();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> getListView();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getProgressDialog() &#123;</div><div class="line">    <span class="keyword">return</span> Center(child: CircularProgressIndicator());</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">        appBar: AppBar(</div><div class="line">          title: Text(<span class="string">"Sample App"</span>),</div><div class="line">        ),</div><div class="line">        body: getBody());</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ListView getListView() =&gt; ListView.builder(</div><div class="line">      itemCount: widgets.length,</div><div class="line">      itemBuilder: (BuildContext context, <span class="built_in">int</span> position) &#123;</div><div class="line">        <span class="keyword">return</span> getRow(position);</div><div class="line">      &#125;);</div><div class="line"></div><div class="line">  Widget getRow(<span class="built_in">int</span> i) &#123;</div><div class="line">    <span class="keyword">return</span> Padding(padding: EdgeInsets.all(<span class="number">10.0</span>), child: Text(<span class="string">"Row <span class="subst">$&#123;widgets[i][<span class="string">"title"</span>]&#125;</span>"</span>));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  loadData() <span class="keyword">async</span> &#123;</div><div class="line">    <span class="built_in">String</span> dataURL = <span class="string">"https://jsonplaceholder.typicode.com/posts"</span>;</div><div class="line">    http.Response response = <span class="keyword">await</span> http.<span class="keyword">get</span>(dataURL);</div><div class="line">    setState(() &#123;</div><div class="line">      widgets = json.decode(response.body);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="工程结构、本地化、依赖和资源"><a href="#工程结构、本地化、依赖和资源" class="headerlink" title="工程结构、本地化、依赖和资源"></a>工程结构、本地化、依赖和资源</h2><h3 id="我怎么在-Flutter-中引入-image-assets？多分辨率怎么办？"><a href="#我怎么在-Flutter-中引入-image-assets？多分辨率怎么办？" class="headerlink" title="我怎么在 Flutter 中引入 image assets？多分辨率怎么办？"></a>我怎么在 Flutter 中引入 image assets？多分辨率怎么办？</h3><p>iOS 把 images 和 assets 作为不同的东西，而 Flutter 中只有 assets。被放到 iOS 中 <code>Images.xcasset</code> 文件夹下的资源在 Flutter 中被放到了 assets 文件夹中。assets 可以是任意类型的文件，而不仅仅是图片。例如，你可以把 json 文件放置到 <code>my-assets</code> 文件夹中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">my-assets/data.json</div></pre></td></tr></table></figure>
<p>在 <code>pubspec.yaml</code> 文件中声明 assets：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">assets:</div><div class="line"> - my-assets/data.json</div></pre></td></tr></table></figure>
<p>然后在代码中使用 <a href="https://docs.flutter.io/flutter/services/AssetBundle-class.html" target="_blank" rel="external"><code>AssetBundle</code></a> 来访问它：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span> show Future;</div><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span> show rootBundle;</div><div class="line"></div><div class="line">Future&lt;<span class="built_in">String</span>&gt; loadAsset() <span class="keyword">async</span> &#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">await</span> rootBundle.loadString(<span class="string">'my-assets/data.json'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对于图片，Flutter 像 iOS 一样，遵循了一个简单的基于像素密度的格式。Image assets 可能是 <code>1.0x</code> <code>2.0x</code> <code>3.0x</code> 或是其他的任何倍数。这些所谓的 <a href="https://docs.flutter.io/flutter/dart-ui/Window/devicePixelRatio.html" target="_blank" rel="external"><code>devicePixelRatio</code></a> 传达了物理像素到单个逻辑像素的比率。</p>
<p>Assets 可以被放置到任何属性文件夹中——Flutter 并没有预先定义的文件结构。在 <code>pubspec.yaml</code> 文件中声明 assets （和位置），然后 Flutter 会把他们识别出来。</p>
<p>举个例子，要把一个叫 <code>my_icon.png</code> 的图片放到 Flutter 工程中，你可能想要把存储它的文件夹叫做 <code>images</code>。把基础图片（1.0x）放置到 <code>images</code> 文件夹中，并把其他变体放置在子文件夹中，并接上合适的比例系数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">images/my_icon.png       // Base: 1.0x image</div><div class="line">images/2.0x/my_icon.png  // 2.0x image</div><div class="line">images/3.0x/my_icon.png  // 3.0x image</div></pre></td></tr></table></figure>
<p>接着，在 <code>pubspec.yaml</code> 文件夹中声明这些图片：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">assets:</div><div class="line"> - images/my_icon.jpeg</div></pre></td></tr></table></figure>
<p>你可以用 <code>AssetImage</code> 来访问这些图片：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> AssetImage(<span class="string">"images/a_dot_burr.jpeg"</span>);</div></pre></td></tr></table></figure>
<p>或者在 <code>Image</code> widget 中直接使用：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line">Widget build(BuildContext context) &#123;</div><div class="line">  <span class="keyword">return</span> Image.asset(<span class="string">"images/my_image.png"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更多细节，参见 <a href="https://flutter.io/assets-and-images" target="_blank" rel="external">Adding Assets and Images in Flutter</a>。</p>
<h3 id="我在哪里放置字符串？我怎么做本地化？"><a href="#我在哪里放置字符串？我怎么做本地化？" class="headerlink" title="我在哪里放置字符串？我怎么做本地化？"></a>我在哪里放置字符串？我怎么做本地化？</h3><p>不像 iOS 拥有一个 <code>Localizable.strings</code> 文件，Flutter 目前并没有一个用于处理字符串的系统。目前，最佳实践是把你的文本拷贝到静态区，并在这里访问。例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Strings</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> <span class="built_in">String</span> welcomeMessage = <span class="string">"Welcome To Flutter"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>并且这样访问你的字符串：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Text(Strings.welcomeMessage)</div></pre></td></tr></table></figure>
<p>默认情况下，Flutter 只支持美式英语字符串。如果你要支持其他语言，请引入 <code>flutter_localizations</code> 包。你可能也要引入  <a href="https://pub.dartlang.org/packages/intl" target="_blank" rel="external"><code>intl</code></a> 包来支持其他的 i10n 机制，比如日期/时间格式化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dependencies:</div><div class="line">  # ...</div><div class="line">  flutter_localizations:</div><div class="line">    sdk: flutter</div><div class="line">  intl: &quot;^0.15.6&quot;</div></pre></td></tr></table></figure>
<p>要使用 <code>flutter_localizations</code> 包，在 app widget 中指 <code>localizationsDelegates</code> 和 <code>supportedLocales</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter_localizations/flutter_localizations.dart'</span>;</div><div class="line"></div><div class="line">MaterialApp(</div><div class="line"> localizationsDelegates: [</div><div class="line">   <span class="comment">// Add app-specific localization delegate[s] here</span></div><div class="line">   GlobalMaterialLocalizations.delegate,</div><div class="line">   GlobalWidgetsLocalizations.delegate,</div><div class="line"> ],</div><div class="line"> supportedLocales: [</div><div class="line">    <span class="keyword">const</span> Locale(<span class="string">'en'</span>, <span class="string">'US'</span>), <span class="comment">// English</span></div><div class="line">    <span class="keyword">const</span> Locale(<span class="string">'he'</span>, <span class="string">'IL'</span>), <span class="comment">// Hebrew</span></div><div class="line">    <span class="comment">// ... other locales the app supports</span></div><div class="line">  ],</div><div class="line">  <span class="comment">// ...</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>这些代理包括了实际的本地化值，并且 <code>supportedLocales</code> 定义了 App 支持哪些地区。上面的例子使用了一个 <code>MaterialApp</code> ，所以它既有 <code>GlobalWidgetsLocalizations</code> 用于基础 widgets，也有 <code>MaterialWidgetsLocalizations</code> 用于 Material wigets 的本地化。如果你使用 <code>WidgetsApp</code> ，则无需包括后者。注意，这两个代理虽然包括了“默认”值，但如果你想让你的 App 本地化，你仍需要提供一或多个代理作为你的 App 本地化副本。</p>
<p>当初始化时，<code>WidgetsApp</code> 或 <code>MaterialApp</code> 会使用你指定的代理为你创建一个  <a href="https://docs.flutter.io/flutter/widgets/Localizations-class.html" target="_blank" rel="external"><code>Localizations</code></a> widget。<code>Localizations</code> widget 可以随时从当前上下文中访问设备的地点，或者使用 <a href="https://docs.flutter.io/flutter/dart-ui/Window/locale.html" target="_blank" rel="external"><code>Window.locale</code></a>。</p>
<p>要访问本地化文件，使用 <code>Localizations.of()</code> 方法来访问提供代理的特定本地化类。如需翻译，使用  <a href="https://pub.dartlang.org/packages/intl_translation" target="_blank" rel="external"><code>intl_translation</code></a> 包来取出翻译副本到 <a href="https://code.google.com/p/arb/wiki/ApplicationResourceBundleSpecification" target="_blank" rel="external">arb</a> 文件中。把它们引入 App 中，并用 <code>intl</code> 来使用它们。</p>
<p>更多 Flutter 中国际化和本地化的细节，请访问 <a href="https://flutter.io/tutorials/internationalization" target="_blank" rel="external">internationalization guide</a> ，那里有不使用 <code>intl</code> 包的示例代码。</p>
<p>注意，在 Flutter 1.0 beta 2 之前，在 Flutter 中定义的 assets 不能在原生一侧被访问。原生定义的资源在 Flutter 中也不可用，因为它们在独立的文件夹中。</p>
<h3 id="Cocoapods-相当于什么？我该如何添加依赖？"><a href="#Cocoapods-相当于什么？我该如何添加依赖？" class="headerlink" title="Cocoapods 相当于什么？我该如何添加依赖？"></a>Cocoapods 相当于什么？我该如何添加依赖？</h3><p>在 iOS 中，你把依赖添加到 <code>Podfile</code> 中。Flutter 使用 Dart 构建系统和 Pub 包管理器来处理依赖。这些工具将本机 Android 和 iOS 包装应用程序的构建委派给相应的构建系统。</p>
<p>如果你的 Flutter 工程中的 iOS 文件夹中拥有 Podfile，请仅在你为每个平台集成时使用它。总体来说，使用 <code>pubspec.yaml</code> 来在 Flutter 中声明外部依赖。一个可以找到优秀 Flutter 包的地方是 <a href="https://pub.dartlang.org/flutter/packages/" target="_blank" rel="external">Pub</a>。</p>
<h2 id="ViewControllers"><a href="#ViewControllers" class="headerlink" title="ViewControllers"></a>ViewControllers</h2><h3 id="ViewController-相当于-Flutter-中的什么？"><a href="#ViewController-相当于-Flutter-中的什么？" class="headerlink" title="ViewController 相当于 Flutter 中的什么？"></a>ViewController 相当于 Flutter 中的什么？</h3><p>在 iOS 中，一个 ViewController 代表了用户界面的一部分，最常用于一个屏幕，或是其中一部分。它们被组合在一起用于构建复杂的用户界面，并帮助你拆分 App 的 UI。在 Flutter 中，这一任务回落到了 widgets 中。就像在界面导航部分提到的一样，一个屏幕也是被 widgets 来表示的，因为“万物皆 widget！”。使用 <code>Navigator</code> 在 <code>Route</code> 之间跳转，或者渲染相同数据的不同状态。</p>
<h3 id="我该怎么监听-iOS-中的生命周期事件？"><a href="#我该怎么监听-iOS-中的生命周期事件？" class="headerlink" title="我该怎么监听 iOS 中的生命周期事件？"></a>我该怎么监听 iOS 中的生命周期事件？</h3><p>在 iOS 中，你可以重写 <code>ViewController</code> 中的方法来补货它的视图的生命周期，或者在 <code>AppDelegate</code> 中注册生命周期的回调函数。在 Flutter 中没有这两个概念，但你可以通过 hook <code>WidgetsBinding</code> 观察者来监听生命周期事件，并监听 <code>didChangeAppLifecycleState()</code> 的变化事件。</p>
<p>可观察的生命周期事件有：</p>
<ul>
<li><code>inactive</code> - 应用处于不活跃的状态，并且不会接受用户的输入。这个事件仅工作在 iOS 平台，在 Android 上没有等价的事件。</li>
<li><code>paused</code> - 应用暂时对用户不可见，虽然不接受用户输入，但是是在后台运行的。</li>
<li><code>resumed</code> - 应用可见，也响应用户的输入。</li>
<li><code>suspending</code> - 应用暂时被挂起，在 iOS 上没有这一事件。</li>
</ul>
<p>更多关于这些状态的细节和含义，请参见  <a href="https://docs.flutter.io/flutter/dart-ui/AppLifecycleState-class.html" target="_blank" rel="external"><code>AppLifecycleStatus</code> documentation</a> 。</p>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h3 id="UITableView-和-UICollectionView-相当于-Flutter-中的什么？"><a href="#UITableView-和-UICollectionView-相当于-Flutter-中的什么？" class="headerlink" title="UITableView 和 UICollectionView 相当于 Flutter 中的什么？"></a>UITableView 和 UICollectionView 相当于 Flutter 中的什么？</h3><p>在 iOS 中，你可能用 UITableView 或 UICollectionView 来展示一个列表。在 Flutter 中，你可以用 <code>ListView</code> 来达到相似的实现。在 iOS 中，你通过代理方法来确定行数，每一个 index path 的单元格，以及单元格的尺寸。</p>
<p>由于 Flutter 中 widget 的不可变特性，你需要向 <code>ListView</code> 传递一个 widget 列表，Flutter 会确保滚动是快速且流畅的。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: ListView(children: _getListData()),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _getListData() &#123;</div><div class="line">    <span class="built_in">List</span>&lt;Widget&gt; widgets = [];</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">      widgets.add(Padding(padding: EdgeInsets.all(<span class="number">10.0</span>), child: Text(<span class="string">"Row $i"</span>)));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> widgets;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么知道列表的哪个元素被点击了？"><a href="#我怎么知道列表的哪个元素被点击了？" class="headerlink" title="我怎么知道列表的哪个元素被点击了？"></a>我怎么知道列表的哪个元素被点击了？</h3><p>iOS 中，你通过 <code>tableView:didSelectRowAtIndexPath:</code> 代理方法来实现。在 Flutter 中，使用传递进来的 widget 的 touch handle：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: ListView(children: _getListData()),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _getListData() &#123;</div><div class="line">    <span class="built_in">List</span>&lt;Widget&gt; widgets = [];</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">      widgets.add(GestureDetector(</div><div class="line">        child: Padding(</div><div class="line">          padding: EdgeInsets.all(<span class="number">10.0</span>),</div><div class="line">          child: Text(<span class="string">"Row $i"</span>),</div><div class="line">        ),</div><div class="line">        onTap: () &#123;</div><div class="line">          <span class="built_in">print</span>(<span class="string">'row tapped'</span>);</div><div class="line">        &#125;,</div><div class="line">      ));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> widgets;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么动态地更新-ListView？"><a href="#我怎么动态地更新-ListView？" class="headerlink" title="我怎么动态地更新 ListView？"></a>我怎么动态地更新 ListView？</h3><p>在 iOS 中，你改变列表的数据，并通过 <code>reloadData()</code> 方法来通知 table 或是 collection view。</p>
<p>在 Flutter 中，如果你想通过 <code>setState()</code> 方法来更新 widget 列表，你会很快发现你的数据展示并没有变化。这是因为当 <code>setState()</code> 被调用时，Flutter 渲染引擎会去检查 widget 树来查看是否有什么地方被改变了。当它得到你的 <code>ListView</code> 时，它会使用一个 <code>==</code> 判断，并且发现两个 <code>ListView</code> 是相同的。没有什么东西是变了的，因此更新不是必须的。</p>
<p>一个更新 <code>ListView</code> 的简单方法是，在 <code>setState()</code> 中创建一个新的 list，并把旧 list 的数据拷贝给新的 list。虽然这样很简单，但当数据集很大时，并不推荐这样做：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="built_in">List</span> widgets = [];</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> initState() &#123;</div><div class="line">    <span class="keyword">super</span>.initState();</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">      widgets.add(getRow(i));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: ListView(children: widgets),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Widget getRow(<span class="built_in">int</span> i) &#123;</div><div class="line">    <span class="keyword">return</span> GestureDetector(</div><div class="line">      child: Padding(</div><div class="line">        padding: EdgeInsets.all(<span class="number">10.0</span>),</div><div class="line">        child: Text(<span class="string">"Row $i"</span>),</div><div class="line">      ),</div><div class="line">      onTap: () &#123;</div><div class="line">        setState(() &#123;</div><div class="line">          widgets = <span class="built_in">List</span>.from(widgets);</div><div class="line">          widgets.add(getRow(widgets.length + <span class="number">1</span>));</div><div class="line">          <span class="built_in">print</span>(<span class="string">'row $i'</span>);</div><div class="line">        &#125;);</div><div class="line">      &#125;,</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>一个推荐的、高效的且有效的做法是，使用 <code>ListView.Builder</code> 来构建列表。这个方法在你想要构建动态列表，或是列表拥有大量数据时会非常好用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> main() &#123;</div><div class="line">  runApp(SampleApp());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="built_in">List</span> widgets = [];</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> initState() &#123;</div><div class="line">    <span class="keyword">super</span>.initState();</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">      widgets.add(getRow(i));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: ListView.builder(</div><div class="line">        itemCount: widgets.length,</div><div class="line">        itemBuilder: (BuildContext context, <span class="built_in">int</span> position) &#123;</div><div class="line">          <span class="keyword">return</span> getRow(position);</div><div class="line">        &#125;,</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Widget getRow(<span class="built_in">int</span> i) &#123;</div><div class="line">    <span class="keyword">return</span> GestureDetector(</div><div class="line">      child: Padding(</div><div class="line">        padding: EdgeInsets.all(<span class="number">10.0</span>),</div><div class="line">        child: Text(<span class="string">"Row $i"</span>),</div><div class="line">      ),</div><div class="line">      onTap: () &#123;</div><div class="line">        setState(() &#123;</div><div class="line">          widgets.add(getRow(widgets.length + <span class="number">1</span>));</div><div class="line">          <span class="built_in">print</span>(<span class="string">'row $i'</span>);</div><div class="line">        &#125;);</div><div class="line">      &#125;,</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>与创建一个 “ListView” 不同，创建一个 <code>ListView.builder</code> 接受两个主要参数：列表的初始长度，和一个 <code>ItemBuilder</code> 方法。</p>
<p><code>ItemBuilder</code> 方法和 <code>cellForItemAt</code> 代理方法非常类似，它接受一个位置，并且返回在这个位置上你希望渲染的 cell。</p>
<p>最后，也是最重要的，注意 <code>onTap()</code> 函数里并没有重新创建一个 list，而是 <code>.add</code> 了一个 widget。</p>
<h3 id="ScrollView-相当于-Flutter-里的什么？"><a href="#ScrollView-相当于-Flutter-里的什么？" class="headerlink" title="ScrollView 相当于 Flutter 里的什么？"></a>ScrollView 相当于 Flutter 里的什么？</h3><p>在 iOS 中，你给 view 包裹上 <code>ScrollView</code> 来允许用户在需要时滚动你的内容。</p>
<p>在 Flutter 中，最简单的方法是使用 <code>ListView</code> widget。它表现得既和 iOS 中的 <code>ScrollView</code> 一致，也能和 <code>TableView</code> 一致，因为你可以给它的 widget 做垂直排布：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line">Widget build(BuildContext context) &#123;</div><div class="line">  <span class="keyword">return</span> ListView(</div><div class="line">    children: &lt;Widget&gt;[</div><div class="line">      Text(<span class="string">'Row One'</span>),</div><div class="line">      Text(<span class="string">'Row Two'</span>),</div><div class="line">      Text(<span class="string">'Row Three'</span>),</div><div class="line">      Text(<span class="string">'Row Four'</span>),</div><div class="line">    ],</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更多关于在 Flutter 总如何排布 widget 的文档，请参阅 <a href="https://flutter.io/widgets/layout/" target="_blank" rel="external">layout tutorial</a>。</p>
<h2 id="手势检测及触摸事件处理"><a href="#手势检测及触摸事件处理" class="headerlink" title="手势检测及触摸事件处理"></a>手势检测及触摸事件处理</h2><h3 id="我怎么给-Flutter-的-widget-添加一个点击监听者？"><a href="#我怎么给-Flutter-的-widget-添加一个点击监听者？" class="headerlink" title="我怎么给 Flutter 的 widget 添加一个点击监听者？"></a>我怎么给 Flutter 的 widget 添加一个点击监听者？</h3><p>在 iOS 中，你给一个 view 添加 <code>GestureRecognizer</code> 来处理点击事件。在 Flutter 中，有两种方法来添加点击监听者：</p>
<ol>
<li><p>如果 widget 本身支持事件监测，直接传递给它一个函数，并在这个函数里实现响应方法。例如，<code>RaisedButton</code> widget 拥有一个 <code>RaisedButton</code> 参数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line">Widget build(BuildContext context) &#123;</div><div class="line">  <span class="keyword">return</span> RaisedButton(</div><div class="line">    onPressed: () &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"click"</span>);</div><div class="line">    &#125;,</div><div class="line">    child: Text(<span class="string">"Button"</span>),</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>如果 widget 本身不支持事件监测，则在外面包裹一个 GestureDetector，并给它的 onTap 属性传递一个函数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      body: Center(</div><div class="line">        child: GestureDetector(</div><div class="line">          child: FlutterLogo(</div><div class="line">            size: <span class="number">200.0</span>,</div><div class="line">          ),</div><div class="line">          onTap: () &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"tap"</span>);</div><div class="line">          &#125;,</div><div class="line">        ),</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="我怎么处理-widget-上的其他手势？"><a href="#我怎么处理-widget-上的其他手势？" class="headerlink" title="我怎么处理 widget 上的其他手势？"></a>我怎么处理 widget 上的其他手势？</h3><p>使用 <code>GestureDetector</code> 你可以监听更广阔范围内的手势，比如：</p>
<ul>
<li>Tapping<ul>
<li><code>onTapDown</code> — 在特定位置轻触手势接触了屏幕。</li>
<li><code>onTapUp</code> — 在特定位置产生了一个轻触手势，并停止接触屏幕。</li>
<li><code>onTap</code> — 产生了一个轻触手势。</li>
<li><code>onTapCancel</code> — 触发了 <code>onTapDown</code> 但没能触发 tap。</li>
</ul>
</li>
<li>Double tapping<ul>
<li><code>onDoubleTap</code> — 用户在同一个位置快速点击了两下屏幕。</li>
</ul>
</li>
<li>Long pressing<ul>
<li><code>onLongPress</code> — 用户在同一个位置长时间接触屏幕。</li>
</ul>
</li>
<li>Vertical dragging<ul>
<li><code>onVerticalDragStart</code> — 接触了屏幕，并且可能会垂直移动。</li>
<li><code>onVerticalDragUpdate</code> — 接触了屏幕，并继续在垂直方向移动。</li>
<li><code>onVerticalDragEnd</code> — 之前接触了屏幕并垂直移动，并在停止接触屏幕前以某个垂直的速度移动。</li>
</ul>
</li>
<li>Horizontal dragging<ul>
<li><code>onHorizontalDragStart</code> </li>
<li><code>onHorizontalDragUpdate</code></li>
<li><code>onHorizontalDragEnd</code></li>
</ul>
</li>
</ul>
<p>下面这个例子展示了一个 <code>GestureDetector</code> 是如何在双击时旋转 Flutter 的 logo 的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">AnimationController controller;</div><div class="line">CurvedAnimation curve;</div><div class="line"></div><div class="line"><span class="meta">@override</span></div><div class="line"><span class="keyword">void</span> initState() &#123;</div><div class="line">  controller = AnimationController(duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">2000</span>), vsync: <span class="keyword">this</span>);</div><div class="line">  curve = CurvedAnimation(parent: controller, curve: Curves.easeIn);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      body: Center(</div><div class="line">        child: GestureDetector(</div><div class="line">          child: RotationTransition(</div><div class="line">            turns: curve,</div><div class="line">            child: FlutterLogo(</div><div class="line">              size: <span class="number">200.0</span>,</div><div class="line">            )),</div><div class="line">          onDoubleTap: () &#123;</div><div class="line">            <span class="keyword">if</span> (controller.isCompleted) &#123;</div><div class="line">              controller.reverse();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">              controller.forward();</div><div class="line">            &#125;</div><div class="line">          &#125;,</div><div class="line">        ),</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="主题和文字"><a href="#主题和文字" class="headerlink" title="主题和文字"></a>主题和文字</h2><h3 id="我怎么给-App-设置主题？"><a href="#我怎么给-App-设置主题？" class="headerlink" title="我怎么给 App 设置主题？"></a>我怎么给 App 设置主题？</h3><p>Flutter 实现了一套漂亮的 MD 组件，并且开箱可用。它接管了一大堆你需要的样式和主题。</p>
<p>为了充分发挥你的 App 中 MD 组件的优势，声明一个顶级 widget，MaterialApp，用作你的 App 入口。MaterialApp 是一个便利组件，包含了许多 App 通常需要的 MD 风格组件。它通过一个 WidgetsApp 添加了 MD 功能来实现。</p>
<p>但是 Flutter 足够地灵活和富有表现力来实现任何其他的设计语言。在 iOS 上，你可以用 <a href="https://docs.flutter.io/flutter/cupertino/cupertino-library.html" target="_blank" rel="external">Cupertino library</a> 来制作遵守  <a href="https://developer.apple.com/ios/human-interface-guidelines/overview/themes/" target="_blank" rel="external">Human Interface Guidelines</a> 的界面。查看这些 widget 的集合，请参阅 <a href="https://flutter.io/widgets/cupertino/" target="_blank" rel="external">Cupertino widgets gallery</a>。</p>
<p>你也可以在你的 App 中使用 WidgetApp，它提供了许多相似的功能，但不如 <code>MaterialApp</code> 那样强大。</p>
<p>对任何子组件定义颜色和样式，可以给 <code>MaterialApp</code> widget 传递一个 <code>ThemeData</code> 对象。举个例子，在下面的代码中，primary swatch 被设置为蓝色，并且文字的选中颜色是红色：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">        textSelectionColor: Colors.red</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么给-Text-widget-设置自定义字体？"><a href="#我怎么给-Text-widget-设置自定义字体？" class="headerlink" title="我怎么给 Text widget 设置自定义字体？"></a>我怎么给 Text widget 设置自定义字体？</h3><p>在 iOS 中，你在项目中引入任意的 <code>ttf</code> 文件，并在 <code>info.plist</code> 中设置引用。在 Flutter 中，在文件夹中放置字体文件，并在 <code>pubspec.yaml</code> 中引用它，就像添加图片那样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fonts:</div><div class="line">   - family: MyCustomFont</div><div class="line">     fonts:</div><div class="line">       - asset: fonts/MyCustomFont.ttf</div><div class="line">       - style: italic</div></pre></td></tr></table></figure>
<p>然后在你的 <code>Text</code> widget 中指定字体：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line">Widget build(BuildContext context) &#123;</div><div class="line">  <span class="keyword">return</span> Scaffold(</div><div class="line">    appBar: AppBar(</div><div class="line">      title: Text(<span class="string">"Sample App"</span>),</div><div class="line">    ),</div><div class="line">    body: Center(</div><div class="line">      child: Text(</div><div class="line">        <span class="string">'This is a custom font text'</span>,</div><div class="line">        style: TextStyle(fontFamily: <span class="string">'MyCustomFont'</span>),</div><div class="line">      ),</div><div class="line">    ),</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我怎么给我的-Text-widget-设置样式？"><a href="#我怎么给我的-Text-widget-设置样式？" class="headerlink" title="我怎么给我的 Text widget 设置样式？"></a>我怎么给我的 Text widget 设置样式？</h3><p>除了字体以外，你也可以给 Text widget 的样式元素设置自定义值。<code>Text</code> widget 接受一个  <code>TextStyle</code> 对象，你可以指定许多参数，比如：</p>
<ul>
<li><code>color</code></li>
<li><code>decoration</code></li>
<li><code>decorationColor</code></li>
<li><code>decorationStyle</code></li>
<li><code>fontFamily</code></li>
<li><code>fontSize</code></li>
<li><code>fontStyle</code></li>
<li><code>fontWeight</code></li>
<li><code>hashCode</code></li>
<li><code>height</code></li>
<li><code>inherit</code></li>
<li><code>letterSpacing</code></li>
<li><code>textBaseline</code></li>
<li><code>wordSpacing</code></li>
</ul>
<h2 id="表单输入"><a href="#表单输入" class="headerlink" title="表单输入"></a>表单输入</h2><h3 id="Flutter-中表单怎么工作？我怎么拿到用户的输入？"><a href="#Flutter-中表单怎么工作？我怎么拿到用户的输入？" class="headerlink" title="Flutter 中表单怎么工作？我怎么拿到用户的输入？"></a>Flutter 中表单怎么工作？我怎么拿到用户的输入？</h3><p>我们已经提到 Flutter 使用不可变的 widget，并且状态是分离的，你可能会好奇在这种情境下怎么处理用户的输入。在 iOS 中，你经常在需要提交数据时查询组件当前的状态或动作，但这在 Flutter 中是怎么工作的呢？</p>
<p>在表单处理的实践中，就像在 Flutter 中任何其他的地方一样，要通过特定的 widgets。如果你有一个 <code>TextField</code> 或是 <code>TextFormField</code>，你可以通过 <a href="https://docs.flutter.io/flutter/widgets/TextEditingController-class.html" target="_blank" rel="external"><code>TextEditingController</code></a> 来获得用户输入：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyFormState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyForm</span>&gt; </span>&#123;</div><div class="line">  <span class="comment">// Create a text controller and use it to retrieve the current value.</span></div><div class="line">  <span class="comment">// of the TextField!</span></div><div class="line">  <span class="keyword">final</span> myController = TextEditingController();</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  <span class="keyword">void</span> dispose() &#123;</div><div class="line">    <span class="comment">// Clean up the controller when disposing of the Widget.</span></div><div class="line">    myController.dispose();</div><div class="line">    <span class="keyword">super</span>.dispose();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">'Retrieve Text Input'</span>),</div><div class="line">      ),</div><div class="line">      body: Padding(</div><div class="line">        padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</div><div class="line">        child: TextField(</div><div class="line">          controller: myController,</div><div class="line">        ),</div><div class="line">      ),</div><div class="line">      floatingActionButton: FloatingActionButton(</div><div class="line">        <span class="comment">// When the user presses the button, show an alert dialog with the</span></div><div class="line">        <span class="comment">// text the user has typed into our text field.</span></div><div class="line">        onPressed: () &#123;</div><div class="line">          <span class="keyword">return</span> showDialog(</div><div class="line">            context: context,</div><div class="line">            builder: (context) &#123;</div><div class="line">              <span class="keyword">return</span> AlertDialog(</div><div class="line">                <span class="comment">// Retrieve the text the user has typed in using our</span></div><div class="line">                <span class="comment">// TextEditingController</span></div><div class="line">                content: Text(myController.text),</div><div class="line">              );</div><div class="line">            &#125;,</div><div class="line">          );</div><div class="line">        &#125;,</div><div class="line">        tooltip: <span class="string">'Show me the value!'</span>,</div><div class="line">        child: Icon(Icons.text_fields),</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>你可以在这里获得更多信息，或是完整的代码列表： <a href="https://flutter.io/cookbook/forms/retrieve-input/" target="_blank" rel="external">Retrieve the value of a text field</a>，来自 <a href="https://flutter.io/cookbook/" target="_blank" rel="external">Flutter Cookbook</a> 。</p>
<h3 id="Text-field-中的-placeholder-相当于什么？"><a href="#Text-field-中的-placeholder-相当于什么？" class="headerlink" title="Text field 中的 placeholder 相当于什么？"></a>Text field 中的 placeholder 相当于什么？</h3><p>在 Flutter 中，你可以轻易地通过向 Text widget 的装饰构造器参数重传递 <code>InputDecoration</code> 来展示“小提示”，或是占位符文字：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">body: Center(</div><div class="line">  child: TextField(</div><div class="line">    decoration: InputDecoration(hintText: <span class="string">"This is a hint"</span>),</div><div class="line">  ),</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="我怎么展示验证错误信息？"><a href="#我怎么展示验证错误信息？" class="headerlink" title="我怎么展示验证错误信息？"></a>我怎么展示验证错误信息？</h3><p>就像展示“小提示”一样，向 Text widget 的装饰器构造器参数中传递一个 <code>InputDecoration</code>。</p>
<p>然而，你并不想在一开始就显示错误信息。相反，当用户输入了验证信息，更新状态，并传入一个新的 <code>InputDecoration</code> 对象：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</div><div class="line">  <span class="comment">// This widget is the root of your application.</span></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> MaterialApp(</div><div class="line">      title: <span class="string">'Sample App'</span>,</div><div class="line">      theme: ThemeData(</div><div class="line">        primarySwatch: Colors.blue,</div><div class="line">      ),</div><div class="line">      home: SampleAppPage(),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</div><div class="line">  SampleAppPage(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</div><div class="line">  <span class="built_in">String</span> _errorText;</div><div class="line"></div><div class="line">  <span class="meta">@override</span></div><div class="line">  Widget build(BuildContext context) &#123;</div><div class="line">    <span class="keyword">return</span> Scaffold(</div><div class="line">      appBar: AppBar(</div><div class="line">        title: Text(<span class="string">"Sample App"</span>),</div><div class="line">      ),</div><div class="line">      body: Center(</div><div class="line">        child: TextField(</div><div class="line">          onSubmitted: (<span class="built_in">String</span> text) &#123;</div><div class="line">            setState(() &#123;</div><div class="line">              <span class="keyword">if</span> (!isEmail(text)) &#123;</div><div class="line">                _errorText = <span class="string">'Error: This is not an email'</span>;</div><div class="line">              &#125; <span class="keyword">else</span> &#123;</div><div class="line">                _errorText = <span class="keyword">null</span>;</div><div class="line">              &#125;</div><div class="line">            &#125;);</div><div class="line">          &#125;,</div><div class="line">          decoration: InputDecoration(hintText: <span class="string">"This is a hint"</span>, errorText: _getErrorText()),</div><div class="line">        ),</div><div class="line">      ),</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _getErrorText() &#123;</div><div class="line">    <span class="keyword">return</span> _errorText;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">bool</span> isEmail(<span class="built_in">String</span> em) &#123;</div><div class="line">    <span class="built_in">String</span> emailRegexp =</div><div class="line">        <span class="string">r'^(([^&lt;&gt;()[\]\\.,;:\s@\"]+(\.[^&lt;&gt;()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]&#123;2,&#125;))$'</span>;</div><div class="line"></div><div class="line">    <span class="built_in">RegExp</span> regExp = <span class="built_in">RegExp</span>(p);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> regExp.hasMatch(em);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="和硬件、第三方服务以及平台交互"><a href="#和硬件、第三方服务以及平台交互" class="headerlink" title="和硬件、第三方服务以及平台交互"></a>和硬件、第三方服务以及平台交互</h2><h3 id="我怎么和平台，以及平台的原生代码交互？"><a href="#我怎么和平台，以及平台的原生代码交互？" class="headerlink" title="我怎么和平台，以及平台的原生代码交互？"></a>我怎么和平台，以及平台的原生代码交互？</h3><p>Flutter 的代码并不直接在平台之下运行，相反，Dart 代码构建的 Flutter 应用在设备上以原生的方式运行，却“侧步躲开了”平台提供的 SDK。这意味着，例如，你在 Dart 中发起一个网络请求，它就直接在 Dart 的上下文中运行。你并不会用上平常在 iOS 或 Android 上使用的原生 API。你的 Flutter 程序仍然被原生平台的 <code>ViewController</code> 管理作一个 view，但是你并不会直接访问 <code>ViewController</code> 自身，或是原生框架。</p>
<p>但这并不意味着 Flutter 不能和原生 API，或任何你编写的原生代码交互。Flutter 提供了 <a href="https://flutter.io/platform-channels/" target="_blank" rel="external">platform channels</a> ，来和管理你的 Flutter view 的 ViewController 通信和交互数据。平台管道本质上是一个异步通信机制，桥接了 Dart 代码和宿主 ViewController，以及它运行于的 iOS 框架。你可以用平台管道来执行一个原生的函数，或者是从设备的传感器中获取数据。</p>
<p>除了直接使用平台管道之外，你还可以使用一系列预先制作好的 <a href="https://flutter.io/using-packages/" target="_blank" rel="external">plugins</a>。例如，你可以直接使用插件来访问相机胶卷或是设备的摄像头，而不必编写你自己的集成层代码。你可以在 <a href="https://pub.dartlang.org/" target="_blank" rel="external">Pub</a> 上找到插件，这是一个 Dart 和 Flutter 的开源包仓库。其中一些包可能会支持集成 iOS 或 Android，或两者均可。</p>
<p>如果你在 Pub 上找不到符合你需求的插件，你可以<a href="https://flutter.io/developing-packages/" target="_blank" rel="external">自己编写</a> ，并且<a href="https://flutter.io/developing-packages/#publish" target="_blank" rel="external">发布在 Pub 上</a>。</p>
<h3 id="我怎么访问-GPS-传感器？"><a href="#我怎么访问-GPS-传感器？" class="headerlink" title="我怎么访问 GPS 传感器？"></a>我怎么访问 GPS 传感器？</h3><p>使用 <a href="https://pub.dartlang.org/packages/location" target="_blank" rel="external"><code>location</code></a> 社区插件。</p>
<h3 id="我怎么访问摄像头？"><a href="#我怎么访问摄像头？" class="headerlink" title="我怎么访问摄像头？"></a>我怎么访问摄像头？</h3><p><a href="https://pub.dartlang.org/packages/image_picker" target="_blank" rel="external"><code>image_picker</code></a> 在访问摄像头时非常常用。</p>
<h3 id="我怎么登录-Facebook？"><a href="#我怎么登录-Facebook？" class="headerlink" title="我怎么登录 Facebook？"></a>我怎么登录 Facebook？</h3><p>登录 Facebook 可以使用 <a href="https://pub.dartlang.org/packages/flutter_facebook_login" target="_blank" rel="external"><code>flutter_facebook_login</code></a> 社区插件。</p>
<h3 id="我怎么使用-Firebase-特性？"><a href="#我怎么使用-Firebase-特性？" class="headerlink" title="我怎么使用 Firebase 特性？"></a>我怎么使用 Firebase 特性？</h3><p>大多数 Firebase 特性被  <a href="https://pub.dartlang.org/flutter/packages?q=firebase" target="_blank" rel="external">first party plugins</a> 包含了。这些第一方插件由 Flutter 团队维护：</p>
<ul>
<li><a href="https://pub.dartlang.org/packages/firebase_admob" target="_blank" rel="external"><code>firebase_admob</code></a> for Firebase AdMob</li>
<li><a href="https://pub.dartlang.org/packages/firebase_analytics" target="_blank" rel="external"><code>firebase_analytics</code></a> for Firebase Analytics</li>
<li><a href="https://pub.dartlang.org/packages/firebase_auth" target="_blank" rel="external"><code>firebase_auth</code></a> for Firebase Auth</li>
<li><a href="https://pub.dartlang.org/packages/firebase_core" target="_blank" rel="external"><code>firebase_core</code></a> for Firebase’s Core package</li>
<li><a href="https://pub.dartlang.org/packages/firebase_database" target="_blank" rel="external"><code>firebase_database</code></a> for Firebase RTDB</li>
<li><a href="https://pub.dartlang.org/packages/firebase_storage" target="_blank" rel="external"><code>firebase_storage</code></a> for Firebase Cloud Storage</li>
<li><a href="https://pub.dartlang.org/packages/firebase_messaging" target="_blank" rel="external"><code>firebase_messaging</code></a> for Firebase Messaging (FCM)</li>
<li><a href="https://pub.dartlang.org/packages/cloud_firestore" target="_blank" rel="external"><code>cloud_firestore</code></a> for Firebase Cloud Firestore</li>
</ul>
<p>你也可以在 Pub 上找到 Firebase 的第三方插件。</p>
<h3 id="我怎创建自己的原生集成层？"><a href="#我怎创建自己的原生集成层？" class="headerlink" title="我怎创建自己的原生集成层？"></a>我怎创建自己的原生集成层？</h3><p>如果有一些 Flutter 和社区插件遗漏的平台相关的特性，可以根据  <a href="https://flutter.io/developing-packages/" target="_blank" rel="external">developing packages and plugins</a> 页面构建自己的插件。</p>
<p>Flutter 的插件结构，简要来说，就像 Android 中的 Event bus。你发送一个消息，并让接受者处理并反馈结果给你。在这种情况下，接受者就是在 Android 或 iOS 上的原生代码。</p>
<h2 id="数据库和本地存储"><a href="#数据库和本地存储" class="headerlink" title="数据库和本地存储"></a>数据库和本地存储</h2><h3 id="我怎么在-Flutter-中访问-UserDefaults？"><a href="#我怎么在-Flutter-中访问-UserDefaults？" class="headerlink" title="我怎么在 Flutter 中访问 UserDefaults？"></a>我怎么在 Flutter 中访问 UserDefaults？</h3><p>在 iOS 中，你可以使用属性列表来存储键值对的集合，即我们熟悉的 UserDefaults。</p>
<p>在 Flutter 中，可以使用  <a href="https://pub.dartlang.org/packages/shared_preferences" target="_blank" rel="external">Shared Preferences plugin</a> 来达到相似的功能。它包裹了 <code>UserDefaluts</code> 以及 Android 上等价的 <code>SharedPreferences</code> 的功能。</p>
<h3 id="CoreData-相当于-Flutter-中的什么？"><a href="#CoreData-相当于-Flutter-中的什么？" class="headerlink" title="CoreData 相当于 Flutter 中的什么？"></a>CoreData 相当于 Flutter 中的什么？</h3><p>在 iOS 中，你通过 CoreData 来存储结构化的数据。这是一个 SQL 数据库的上层封装，让查询和关联模型变得更加简单。</p>
<p>在 Flutter 中，使用 <a href="https://pub.dartlang.org/packages/sqflite" target="_blank" rel="external">SQFlite</a> 插件来实现这个功能。</p>
<h2 id="通知"><a href="#通知" class="headerlink" title="通知"></a>通知</h2><h3 id="我怎么推送通知？"><a href="#我怎么推送通知？" class="headerlink" title="我怎么推送通知？"></a>我怎么推送通知？</h3><p>在 iOS 中，你需要向 developer portal 中注册来允许推送通知。</p>
<p>在 Flutter 中，使用 <code>firebase_messaging</code> 插件来实现这一功能。</p>
<p>更多使用 Firebase Cloud Messaging API 的信息，请参阅 <a href="https://pub.dartlang.org/packages/firebase_messaging" target="_blank" rel="external"><code>firebase_messaging</code></a> 插件文档。</p>
<hr>
<p>此文档由 Luyuan Wang 原创翻译。2018 - 07 - 11</p>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/Flutter/">#Flutter</a>
                        </div>
                    

                    <!-- Comments -->
                    <span id="busuanzi_container_page_pv">
  <br/>本文总阅读量：<span id="busuanzi_value_page_pv"></span>次<br/>
</span>

<!--PC和WAP自适应版-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cytltkHPr'; 
var conf = 'prod_9d0366f4dd97c25a5dfc01c79988673c'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>






                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://ooo.0o0.ooo/2017/04/22/58fa2d6164f2d.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="王路远">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            王路远<br>华中科技大学 冰岩作坊<br>wangluyuan@bingyan.net<br>e@wangluyuan.cc</a>
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2018/07/20/iOS图片裁剪旋转格式转换/">iOS图片裁剪、旋转、格式转换</a>
        </p>
    
        <p>
            <a href="/2018/07/13/解决Unacceptable-Content-Type/">解决Unacceptable Content-Type问题</a>
        </p>
    
        <p>
            <a href="/2018/07/13/AFNetworking设置HTTP-Header-Body/">AFNetworking设置HTTP的Header和Body</a>
        </p>
    
        <p>
            <a href="/2018/07/11/Flutter-for-iOS-dev-翻译/">Flutter for iOS devs 翻译</a>
        </p>
    
        <p>
            <a href="/2018/06/15/让Xcode控制台打印彩色文字/">让Xcode控制台打印彩色文字</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://git.bingyan.net/u/BeBeBerr" target="_blank">
                            <i class="fa fa-gitlab"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/BeBeBerr" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://weibo.com/BeBeBerr" target="_blank">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:wangluyuan@bingyan.net" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                www.wangluyuan.cc
            </div>
            
        </div>
    </div>


<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>